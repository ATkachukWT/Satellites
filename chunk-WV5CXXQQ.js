import{a as re}from"./chunk-KBDKZSTB.js";import{a as ce}from"./chunk-XG5NROZE.js";import{a as fe}from"./chunk-7OTP74QG.js";import{a as ye}from"./chunk-KQEHVUTS.js";import{e as ve,g as we,m as be,n as ge}from"./chunk-SVJ5AK5B.js";import{a as ie}from"./chunk-FXCL7YYQ.js";import{C as de,F as Y,b as ae,q as le,r as me,s as ue,z as ct}from"./chunk-M7AB4SQK.js";import{i as pe,k as ne}from"./chunk-4ABKPPKG.js";import{c as se,d as X}from"./chunk-W26XKMAT.js";import{a as v}from"./chunk-JTDXB5TK.js";import{P as xe,h as ft,i as ht,l as he}from"./chunk-HP4LYRR4.js";import{e as Q}from"./chunk-LACL4BQ2.js";import{c as dt}from"./chunk-YR2HD3ZC.js";import{m as oe}from"./chunk-LFH24RLM.js";import{a}from"./chunk-X4LNX4BR.js";import{a as yt}from"./chunk-4XZ6X7MQ.js";import{a as l}from"./chunk-WLHY3MMA.js";import{qa as te,ra as ee}from"./chunk-KGVXGH6H.js";import{a as k}from"./chunk-DB3UIQCU.js";import{y as Yt,z as $t}from"./chunk-ETE32IYO.js";import{f as m}from"./chunk-SG7CQU4O.js";import{H as o,s as mt,t as ut}from"./chunk-QHVIRF5H.js";import{I as p,w as K}from"./chunk-WZDN6K3C.js";import{a as t}from"./chunk-QGVBCWUY.js";import{b as I,r as Xt}from"./chunk-UHRSAPGQ.js";var xt,R=xt=class extends m{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new xt({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};t([o({type:String,json:{write:!0}})],R.prototype,"expression",void 0),t([o({type:String,json:{write:!0}})],R.prototype,"name",void 0),t([o({type:["boolean","date","number","string"],json:{write:!0}})],R.prototype,"returnType",void 0),t([o({type:String,json:{write:!0}})],R.prototype,"title",void 0),R=xt=t([p("esri.form.ExpressionInfo")],R);var je=R;var A=class extends m{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};t([o({type:String,json:{write:!0}})],A.prototype,"description",void 0),t([o({type:String,json:{write:!0}})],A.prototype,"label",void 0),t([o()],A.prototype,"type",void 0),t([o({type:String,json:{write:!0}})],A.prototype,"visibilityExpression",void 0),A=t([p("esri.form.elements.Element")],A);var d=A;var $=class extends v.ClonableMixin(m){constructor(e){super(e),this.type=null}};t([o()],$.prototype,"type",void 0),$=t([p("esri.form.elements.inputs.attachments.Input")],$);var y=$;var N=["any","capture","upload"];var B=class extends y{constructor(e){super(e),this.type="audio",this.inputMethod="any",this.maxDuration=null}};t([o({type:["audio"],readOnly:!0,json:{write:!0}})],B.prototype,"type",void 0),t([o({type:N,json:{write:!0}})],B.prototype,"inputMethod",void 0),t([o({type:Number,json:{write:!0}})],B.prototype,"maxDuration",void 0),B=t([p("esri.form.elements.inputs.attachments.AudioInput")],B);var vt=B;var z=class extends y{constructor(e){super(e),this.type="document",this.maxFileSize=null}};t([o({type:["document"],readOnly:!0,json:{write:!0}})],z.prototype,"type",void 0),t([o({type:Number,json:{write:!0}})],z.prototype,"maxFileSize",void 0),z=t([p("esri.form.elements.inputs.attachments.DocumentInput")],z);var wt=z;var U=class extends y{constructor(e){super(e),this.type="image",this.inputMethod="any",this.maxImageSize=null}};t([o({type:["image"],readOnly:!0,json:{write:!0}})],U.prototype,"type",void 0),t([o({type:N,json:{write:!0}})],U.prototype,"inputMethod",void 0),t([o({type:Number,json:{write:!0}})],U.prototype,"maxImageSize",void 0),U=t([p("esri.form.elements.inputs.attachments.ImageInput")],U);var bt=U;var Z=class extends y{constructor(e){super(e),this.type="signature",this.inputMethod="any"}};t([o({type:["signature"],readOnly:!0,json:{write:!0}})],Z.prototype,"type",void 0),t([o({type:N,json:{write:!0}})],Z.prototype,"inputMethod",void 0),Z=t([p("esri.form.elements.inputs.attachments.SignatureInput")],Z);var gt=Z;var V=class extends y{constructor(e){super(e),this.type="video",this.inputMethod="any",this.maxDuration=null}};t([o({type:["video"],readOnly:!0,json:{write:!0}})],V.prototype,"type",void 0),t([o({type:N,json:{write:!0}})],V.prototype,"inputMethod",void 0),t([o({type:Number,json:{write:!0}})],V.prototype,"maxDuration",void 0),V=t([p("esri.form.elements.inputs.attachments.VideoInput")],V);var jt=V;function tt(e){return{nestableTypes:{base:y,key:"type",typeMap:{audio:vt,document:wt,image:bt,signature:gt,video:jt}},allTypes:{base:y,key:"type",typeMap:{attachment:e,audio:vt,document:wt,image:bt,signature:gt,video:jt}}}}function Ie(e,r,s){return e?e.map(i=>K(s?r.nestableTypes:r.allTypes,i)):null}function Se(e,r,s){if(!e)return null;let i=s?r.nestableTypes.typeMap:r.allTypes.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function Ee(e,r,s){if(!e)return null;let i=s?r.nestableTypes.typeMap:r.allTypes.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}var S=class extends y{constructor(e){super(e),this.type="attachment",this.attachmentAssociationType="exact",this.inputTypes=null}castInputs(e){return Ie(e,It,!0)}readInputs(e,r){return Se(r.inputTypes,It,!0)}writeInputs(e,r){r.inputTypes=Ee(e,It,!0)}};t([o({type:["attachment"],readOnly:!0,json:{write:!0}})],S.prototype,"type",void 0),t([o({type:["any","exact","exactOrNone"],json:{write:!0}})],S.prototype,"attachmentAssociationType",void 0),t([o({json:{write:{isRequired:!0}}})],S.prototype,"inputTypes",void 0),t([k("inputTypes")],S.prototype,"castInputs",null),t([a("inputTypes")],S.prototype,"readInputs",null),t([l("inputTypes")],S.prototype,"writeInputs",null),S=t([p("esri.form.elements.inputs.attachments.AttachmentInput")],S);var It=tt(S),Fe=S;var St,Ye=tt(Fe),f=St=class extends d{constructor(e){super(e),this.allowUserRename=!0,this.attachmentKeyword=null,this.displayFilename=!1,this.editableExpression=null,this.filenameExpression="{attachmentKeyword}_{now}",this.input=null,this.maxAttachmentCount=null,this.minAttachmentCount=null,this.type="attachment",this.useOriginalFilename=!0}clone(){return new St({allowUserRename:this.allowUserRename,attachmentKeyword:this.attachmentKeyword,description:this.description,displayFilename:this.displayFilename,editableExpression:this.editableExpression,filenameExpression:this.filenameExpression,input:this.input?.clone(),label:this.label,maxAttachmentCount:this.maxAttachmentCount,minAttachmentCount:this.minAttachmentCount,useOriginalFilename:this.useOriginalFilename,visibilityExpression:this.visibilityExpression})}};t([o({type:Boolean,json:{write:!0}})],f.prototype,"allowUserRename",void 0),t([o({type:String,json:{write:{isRequired:!0}}})],f.prototype,"attachmentKeyword",void 0),t([o({type:Boolean,json:{write:!0}})],f.prototype,"displayFilename",void 0),t([o({type:String,json:{write:!0}})],f.prototype,"editableExpression",void 0),t([o({type:String,json:{write:!0}})],f.prototype,"filenameExpression",void 0),t([o({types:Ye.allTypes,json:{read:{source:"inputType"},write:{target:"inputType",isRequired:!0}}})],f.prototype,"input",void 0),t([o({type:Number,json:{write:!0}})],f.prototype,"maxAttachmentCount",void 0),t([o({type:Number,json:{write:!0}})],f.prototype,"minAttachmentCount",void 0),t([o({type:["attachment"],readOnly:!0,json:{read:!1,write:!0}})],f.prototype,"type",void 0),t([o({type:Boolean,json:{write:!0}})],f.prototype,"useOriginalFilename",void 0),f=St=t([p("esri.form.elements.AttachmentElement")],f);var Et=f;var et=class extends m{constructor(e){super(e),this.type=null}};t([o()],et.prototype,"type",void 0),et=t([p("esri.form.elements.inputs.Input")],et);var u=et;var q=class extends u{constructor(e){super(e),this.maxLength=null,this.minLength=0}};t([o({type:Number,json:{write:!0}})],q.prototype,"maxLength",void 0),t([o({type:Number,json:{write:!0}})],q.prototype,"minLength",void 0),q=t([p("esri.form.elements.inputs.TextInput")],q);var C=q;var Ft,ot=Ft=class extends C{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new Ft({maxLength:this.maxLength,minLength:this.minLength})}};t([o({type:["barcode-scanner"],json:{read:!1,write:!0}})],ot.prototype,"type",void 0),ot=Ft=t([p("esri.form.elements.inputs.BarcodeScannerInput")],ot);var Te=ot;var Tt,_=Tt=class extends u{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new Tt({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};t([o({type:String,json:{write:!0}})],_.prototype,"noValueOptionLabel",void 0),t([o({type:Boolean,json:{write:!0}})],_.prototype,"showNoValueOption",void 0),t([o({type:["combo-box"],json:{read:!1,write:!0}})],_.prototype,"type",void 0),_=Tt=t([p("esri.form.elements.inputs.ComboBoxInput")],_);var Oe=_;var Ot;function Me(e){return e??null}function Ne(e){return e??null}var E=Ot=class extends u{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,r){return Me(r.max)}writeMax(e,r){r.max=Ne(e)}readMin(e,r){return Me(r.min)}writeMin(e,r){r.min=Ne(e)}clone(){return new Ot({max:this.max,min:this.min})}};t([o({type:String,json:{type:String,write:!0}})],E.prototype,"max",void 0),t([a("max")],E.prototype,"readMax",null),t([l("max")],E.prototype,"writeMax",null),t([o({type:String,json:{type:String,write:!0}})],E.prototype,"min",void 0),t([a("min")],E.prototype,"readMin",null),t([l("min")],E.prototype,"writeMin",null),t([o({type:["date-picker"],json:{read:!1,write:!0}})],E.prototype,"type",void 0),E=Ot=t([p("esri.form.elements.inputs.DatePickerInput")],E);var Re=E;var Rt;function Mt(e){return e??null}function Nt(e){return e??null}var c=Rt=class extends u{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,r){return Mt(r.max)}writeMax(e,r){r.max=Nt(e)}readMin(e,r){return Mt(r.min)}writeMin(e,r){r.min=Nt(e)}readTimeResolution(e,r){return Mt(r.timeResolution)}writeTimeResolution(e,r){r.timeResolution=Nt(e)}clone(){return new Rt({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};t([o({type:Boolean,json:{write:!0}})],c.prototype,"includeTimeOffset",void 0),t([o({type:String,json:{type:String,write:!0}})],c.prototype,"max",void 0),t([a("max")],c.prototype,"readMax",null),t([l("max")],c.prototype,"writeMax",null),t([o({type:String,json:{type:String,write:!0}})],c.prototype,"min",void 0),t([a("min")],c.prototype,"readMin",null),t([l("min")],c.prototype,"writeMin",null),t([o({type:String,json:{type:String,write:!0}})],c.prototype,"timeResolution",void 0),t([a("timeResolution")],c.prototype,"readTimeResolution",null),t([l("timeResolution")],c.prototype,"writeTimeResolution",null),t([o({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],c.prototype,"type",void 0),c=Rt=t([p("esri.form.elements.inputs.DateTimeOffsetPickerInput")],c);var Ae=c;var At;function De(e){return e!=null?new Date(e):null}function ke(e){return e?e.getTime():null}var b=At=class extends u{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,r){return De(r.max)}writeMax(e,r){r.max=ke(e)}readMin(e,r){return De(r.min)}writeMin(e,r){r.min=ke(e)}clone(){return new At({includeTime:this.includeTime,max:this.max,min:this.min})}};t([o({type:Boolean,json:{write:!0}})],b.prototype,"includeTime",void 0),t([o({type:Date,json:{type:Number,write:!0}})],b.prototype,"max",void 0),t([a("max")],b.prototype,"readMax",null),t([l("max")],b.prototype,"writeMax",null),t([o({type:Date,json:{type:Number,write:!0}})],b.prototype,"min",void 0),t([a("min")],b.prototype,"readMin",null),t([l("min")],b.prototype,"writeMin",null),t([o({type:["datetime-picker"],json:{read:!1,write:!0}})],b.prototype,"type",void 0),b=At=t([p("esri.form.elements.inputs.DateTimePickerInput")],b);var Be=b;var Dt,L=Dt=class extends u{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new Dt({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};t([o({type:String,json:{write:!0}})],L.prototype,"noValueOptionLabel",void 0),t([o({type:Boolean,json:{write:!0}})],L.prototype,"showNoValueOption",void 0),t([o({type:["radio-buttons"],json:{read:!1,write:!0}})],L.prototype,"type",void 0),L=Dt=t([p("esri.form.elements.inputs.RadioButtonsInput")],L);var Ue=L;var kt,G=kt=class extends u{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new kt({offValue:this.offValue,onValue:this.onValue})}};t([o({type:[String,Number],json:{write:!0}})],G.prototype,"offValue",void 0),t([o({type:[String,Number],json:{write:!0}})],G.prototype,"onValue",void 0),t([o({type:["switch"],json:{read:!1,write:!0}})],G.prototype,"type",void 0),G=kt=t([p("esri.form.elements.inputs.SwitchInput")],G);var Ve=G;var Bt,rt=Bt=class extends C{constructor(e){super(e),this.type="text-area"}clone(){return new Bt({maxLength:this.maxLength,minLength:this.minLength})}};t([o({type:["text-area"],json:{read:!1,write:!0}})],rt.prototype,"type",void 0),rt=Bt=t([p("esri.form.elements.inputs.TextAreaInput")],rt);var Ce=rt;var Ut,it=Ut=class extends C{constructor(e){super(e),this.type="text-box"}clone(){return new Ut({maxLength:this.maxLength,minLength:this.minLength})}};t([o({type:["text-box"],json:{read:!1,write:!0}})],it.prototype,"type",void 0),it=Ut=t([p("esri.form.elements.inputs.TextBoxInput")],it);var _e=it;var _t;function Vt(e){return e??null}function Ct(e){return e??null}var h=_t=class extends u{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,r){return Vt(r.max)}writeMax(e,r){r.max=Ct(e)}readMin(e,r){return Vt(r.min)}writeMin(e,r){r.min=Ct(e)}readTimeResolution(e,r){return Vt(r.timeResolution)}writeTimeResolution(e,r){r.timeResolution=Ct(e)}clone(){return new _t({max:this.max,min:this.min,timeResolution:this.timeResolution})}};t([o({type:String,json:{type:String,write:!0}})],h.prototype,"max",void 0),t([a("max")],h.prototype,"readMax",null),t([l("max")],h.prototype,"writeMax",null),t([o({type:String,json:{type:String,write:!0}})],h.prototype,"min",void 0),t([a("min")],h.prototype,"readMin",null),t([l("min")],h.prototype,"writeMin",null),t([o({type:String,json:{type:String,write:!0}})],h.prototype,"timeResolution",void 0),t([a("timeResolution")],h.prototype,"readTimeResolution",null),t([l("timeResolution")],h.prototype,"writeTimeResolution",null),t([o({type:["time-picker"],json:{read:!1,write:!0}})],h.prototype,"type",void 0),h=_t=t([p("esri.form.elements.inputs.TimePickerInput")],h);var Le=h;var Ge={base:u,key:"type",typeMap:{"barcode-scanner":Te,"combo-box":Oe,"date-picker":Re,"datetime-picker":Be,"datetimeoffset-picker":Ae,"radio-buttons":Ue,switch:Ve,"text-area":Ce,"text-box":_e,"time-picker":Le}};var Lt,w=Lt=class extends d{constructor(e){super(e),this.domain=null,this.editable=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}clone(){return new Lt({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};t([o({types:se,json:{read:{reader:X},write:!0}})],w.prototype,"domain",void 0),t([o({type:Boolean,json:{write:!0}})],w.prototype,"editable",void 0),t([o({type:String,json:{write:!0}})],w.prototype,"editableExpression",void 0),t([o({type:String,json:{write:!0}})],w.prototype,"fieldName",void 0),t([o({type:String,json:{write:!0}})],w.prototype,"hint",void 0),t([o({types:Ge,json:{read:{source:"inputType"},write:{target:"inputType"}}})],w.prototype,"input",void 0),t([o({type:String,json:{write:!0}})],w.prototype,"requiredExpression",void 0),t([o({type:String,json:{read:!1,write:!0}})],w.prototype,"type",void 0),t([o({type:String,json:{write:!0}})],w.prototype,"valueExpression",void 0),w=Lt=t([p("esri.form.elements.FieldElement")],w);var Gt=w;var Jt,T=Jt=class extends d{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new Jt({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:I(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};t([o({type:Number,json:{write:!0}})],T.prototype,"displayCount",void 0),t([o({type:["list"],json:{write:!0}})],T.prototype,"displayType",void 0),t([o({type:String,json:{write:!0}})],T.prototype,"editableExpression",void 0),t([o({type:[pe],json:{write:!0}})],T.prototype,"orderByFields",void 0),t([o({type:Number,json:{write:!0}})],T.prototype,"relationshipId",void 0),t([o({type:["relationship"],json:{read:!1,write:!0}})],T.prototype,"type",void 0),T=Jt=t([p("esri.form.elements.RelationshipElement")],T);var Pt=T;var Wt,J=Wt=class extends d{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new Wt({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};t([o({type:String,json:{write:!0}})],J.prototype,"text",void 0),t([o({type:String,json:{write:!0}})],J.prototype,"textFormat",void 0),t([o({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],J.prototype,"type",void 0),J=Wt=t([p("esri.form.elements.TextElement")],J);var Qt=J;var P=class extends v.ClonableMixin(d){constructor(e){super(e),this.associationTypes=null,this.editableExpression=null,this.type="utilityNetworkAssociations"}};t([o({type:[ne],json:{write:{isRequired:!0}}})],P.prototype,"associationTypes",void 0),t([o({type:String,json:{write:!0}})],P.prototype,"editableExpression",void 0),t([o({type:["utilityNetworkAssociations"],json:{read:!1,write:!0}})],P.prototype,"type",void 0),P=t([p("esri.form.elements.UtilityNetworkAssociationsElement")],P);var zt=P;var Je=e=>e.type==="field",Pe=e=>e.type==="group",We=e=>e.type==="text";function st(e){return{typesWithGroup:{base:d,key:"type",typeMap:{attachment:Et,field:Gt,group:e,relationship:Pt,text:Qt,utilityNetworkAssociations:zt}},typesWithoutGroup:{base:d,key:"type",typeMap:{attachment:Et,field:Gt,relationship:Pt,text:Qt,utilityNetworkAssociations:zt}}}}function pt(e,r,s=!0){if(!e)return null;let i=s?r.typesWithGroup.typeMap:r.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function nt(e,r,s=!0){if(!e)return null;let i=s?r.typesWithGroup.typeMap:r.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function at(e,r,s=!0){return e?e.map(i=>K(s?r.typesWithGroup:r.typesWithoutGroup,i)):null}var qt,F=qt=class extends d{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return at(e,Zt,!1)}readElements(e,r){return pt(r.formElements,Zt,!1)}writeElements(e,r){r.formElements=nt(e,Zt,!1)}clone(){return new qt({description:this.description,elements:I(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};t([o({json:{write:!0}})],F.prototype,"elements",void 0),t([k("elements")],F.prototype,"castElements",null),t([a("elements",["formElements"])],F.prototype,"readElements",null),t([l("elements")],F.prototype,"writeElements",null),t([o({type:["collapsed","expanded"],json:{write:!0}})],F.prototype,"initialState",void 0),t([o({type:String,json:{read:!1,write:!0}})],F.prototype,"type",void 0),F=qt=t([p("esri.form.elements.GroupElement")],F);var Zt=st(F),Qe=F;var Kt,Ht=st(Qe),g=Kt=class extends m{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return at(e,Ht)}readElements(e,r){return pt(r.formElements,Ht)}writeElements(e,r){r.formElements=nt(e,Ht)}clone(){return new Kt({description:this.description,expressionInfos:I(this.expressionInfos),elements:I(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,r){let s=new Set,{description:i,elements:n,expressionInfos:x,title:D}=this;if(H(s,e,i),H(s,e,D),!n)return[];let Xe=$e(n,x).map(lt=>he(s,e,lt));await Promise.all(Xe);for(let lt of n)ze(s,{fieldsIndex:e,relationships:r},lt);return Array.from(s).sort()}};function ze(e,r,s){let{fieldsIndex:i}=r;if(!i||i.fields.length!==e.size)switch(H(e,i,s.label),H(e,i,s.description),s.type){case"field":ht(e,i,s.fieldName);break;case"group":s.elements.forEach(n=>ze(e,r,n));break;case"relationship":if(r.relationships){let n=r.relationships.find(x=>x.id===s.relationshipId);n&&ht(e,i,n.keyField)}ft(e,i,s.orderByFields?.map(n=>n.field));break;case"text":H(e,i,s.text)}}function $e(e,r){if(!r||r.length===0)return[];let s=Ze(e),i=[];for(let n of r)s.has(n.name)&&i.push(n.expression);return i}function Ze(e){let r=new Set;for(let s of e)if(ut(r,s.visibilityExpression),!We(s)){if(Pe(s))mt(r,Ze(s.elements));else if(ut(r,s.editableExpression),Je(s)){let{requiredExpression:i,valueExpression:n}=s;mt(r,[i,n])}}return r}function H(e,r,s){ft(e,r,xe(s))}t([o({type:String,json:{write:!0}})],g.prototype,"description",void 0),t([o({json:{write:!0}})],g.prototype,"elements",void 0),t([k("elements")],g.prototype,"castElements",null),t([a("elements",["formElements"])],g.prototype,"readElements",null),t([l("elements")],g.prototype,"writeElements",null),t([o({type:[je],json:{write:!0}})],g.prototype,"expressionInfos",void 0),t([o({type:Boolean,json:{default:!1,write:!0}})],g.prototype,"preserveFieldValuesWhenHidden",void 0),t([o({type:String,json:{write:!0}})],g.prototype,"title",void 0),g=Kt=t([p("esri.form.FormTemplate")],g);var Wn=g;var O=class extends v.ClonableMixin(m){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};t([o()],O.prototype,"creatorField",void 0),t([o()],O.prototype,"creationDateField",void 0),t([o()],O.prototype,"editorField",void 0),t([o()],O.prototype,"editDateField",void 0),t([o()],O.prototype,"realm",void 0),t([o(Q("dateFieldsTimeReference",!0))],O.prototype,"timeZone",void 0),O=t([p("esri.layers.support.EditFieldsInfo")],O);var qe=O;var j=class extends v.ClonableMixin(m){constructor(e){super(e)}};t([o({constructOnly:!0,json:{write:!0}})],j.prototype,"name",void 0),t([o({constructOnly:!0,json:{write:!0}})],j.prototype,"fields",void 0),t([o({constructOnly:!0,json:{write:!0}})],j.prototype,"isAscending",void 0),t([o({constructOnly:!0,json:{write:!0}})],j.prototype,"indexType",void 0),t([o({constructOnly:!0,json:{write:!0}})],j.prototype,"isUnique",void 0),t([o({constructOnly:!0,json:{write:!0}})],j.prototype,"description",void 0),j=t([p("esri.layers.support.FeatureIndex")],j);var W=class extends v.ClonableMixin(m){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};t([o({type:String,json:{read:{source:"shapeAreaFieldName"}}})],W.prototype,"shapeAreaField",void 0),t([o({type:String,json:{read:{source:"shapeLengthFieldName"}}})],W.prototype,"shapeLengthField",void 0),t([o({type:String,json:{read:e=>te.read(e)||ee.read(e)}})],W.prototype,"units",void 0),W=t([p("esri.layers.support.GeometryFieldsInfo")],W);var He=W;var M=class extends v.ClonableMixin(m){constructor(e){super(e),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;let r={};for(let s of Object.keys(e))r[s]=X(e[s]);return r}writeDomains(e,r){if(!e)return;let s={};for(let i of Object.keys(e))e[i]&&(s[i]=e[i]?.toJSON());r.domains=s}};t([o({type:Number,json:{write:!0}})],M.prototype,"code",void 0),t([o({type:Object,json:{write:!0}})],M.prototype,"defaultValues",void 0),t([o({json:{write:!0}})],M.prototype,"domains",void 0),t([a("domains")],M.prototype,"readDomains",null),t([l("domains")],M.prototype,"writeDomains",null),t([o({type:String,json:{write:!0}})],M.prototype,"name",void 0),M=t([p("esri.layers.support.Subtype")],M);var Ke=M;var al=e=>{let r=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.fieldsIndex=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(dt.ofType(j)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=yt.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}getFieldDomain(){throw new Error("Not implemented")}getField(s){return this.fieldsIndex.get(s)}get authenticationTriggerEvent(){if(!this.url)return null;let{capabilities:s}=this;if(s){let{query:n,operations:x,editing:D}=s;if(!n.supportsQueryByOthers||!n.supportsQueryByAnonymous||x.supportsEditing&&!(D.supportsUpdateByOthers&&D.supportsUpdateByAnonymous&&D.supportsDeleteByOthers&&D.supportsDeleteByAnonymous))return"load"}if(ct(this.serviceDefinitionExpression)||ct(this.definitionExpression))return"load";if(this.userHasUpdateItemPrivileges){if(de(this))return"load";if(this.hasUpdateItemRestrictions)return s.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";let i=this.editFieldsInfo;return(i?.creatorField||i?.editorField)&&s?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(s,i){return fe(i,this.url)}readEditingInfo(s,i){let{editingInfo:n}=i;return n?{lastEditDate:n.lastEditDate!=null?new Date(n.lastEditDate):null}:null}get effectiveCapabilities(){let s=this.capabilities;if(!s)return null;let i=I(s),{operations:n,editing:x}=i;return Y(this)?(this.userHasUpdateItemPrivileges&&(n.supportsQuery=!0),i):this.userHasUpdateItemPrivileges?(n.supportsAdd=n.supportsDelete=n.supportsEditing=n.supportsQuery=n.supportsUpdate=x.supportsDeleteByOthers=x.supportsGeometryUpdate=x.supportsUpdateByOthers=!0,i):(this.userHasFullEditingPrivileges&&n.supportsEditing&&(n.supportsAdd=n.supportsDelete=n.supportsUpdate=x.supportsGeometryUpdate=!0),i)}get effectiveEditingEnabled(){return!1}readGlobalIdFieldFromService(s,i){return le(i)}get hasFullEditingRestrictions(){let s=this.capabilities;if(!s||Y(this))return!1;let{operations:i,editing:n}=s;return i.supportsEditing&&!(i.supportsAdd&&i.supportsDelete&&i.supportsUpdate&&n.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){let s=this.capabilities;if(!s)return!1;let{operations:i,editing:n}=s;return Y(this)?!i.supportsQuery:!(i.supportsAdd&&i.supportsDelete&&i.supportsEditing&&i.supportsQuery&&i.supportsUpdate&&n.supportsDeleteByOthers&&n.supportsGeometryUpdate&&n.supportsUpdateByOthers)}readIsTableFromService(s,i){return i.type==="Table"}readMaxScale(s,i){return i.effectiveMaxScale||s||0}readMinScale(s,i){return i.effectiveMinScale||s||0}readObjectIdFieldFromService(s,i){return me(i)}readServiceDefinitionExpression(s,i){return i.definitionQuery||i.definitionExpression}set url(s){if(s==null)return void this._set("url",s);let i=Yt({layer:this,url:s,nonStandardUrlAllowed:!0,logger:Xt.getLogger(this)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(s,i,n,x){$t(this,s,null,i,x)}readVersion(s,i){return ue(i)}};return t([o({readOnly:!0})],r.prototype,"authenticationTriggerEvent",null),t([o({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],r.prototype,"copyright",void 0),t([o({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","isDataBranchVersioned","isDataVersioned","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],r.prototype,"capabilities",void 0),t([a("service","capabilities")],r.prototype,"readCapabilitiesFromService",null),t([o(Q("dateFieldsTimeReference"))],r.prototype,"dateFieldsTimeZone",void 0),t([o({type:Boolean})],r.prototype,"datesInUnknownTimezone",void 0),t([o({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],r.prototype,"definitionExpression",void 0),t([o({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],r.prototype,"displayField",void 0),t([o({readOnly:!0,type:qe})],r.prototype,"editFieldsInfo",void 0),t([o({readOnly:!0})],r.prototype,"editingInfo",void 0),t([a("editingInfo")],r.prototype,"readEditingInfo",null),t([o({readOnly:!0})],r.prototype,"effectiveCapabilities",null),t([o()],r.prototype,"effectiveEditingEnabled",null),t([o((()=>{let s=I(we),i=s.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},s})())],r.prototype,"elevationInfo",void 0),t([o()],r.prototype,"fieldsIndex",void 0),t([o({type:ye,json:{name:"layerDefinition.floorInfo",write:{layerContainerTypes:ie}}})],r.prototype,"floorInfo",void 0),t([o({type:oe,json:{origins:{service:{read:{source:"extent"}}}}})],r.prototype,"fullExtent",void 0),t([o()],r.prototype,"gdbVersion",void 0),t([o({readOnly:!0,type:He,json:{read:{source:"geometryProperties"}}})],r.prototype,"geometryFieldsInfo",void 0),t([o({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:ae.read}}}})],r.prototype,"geometryType",void 0),t([o({type:String})],r.prototype,"globalIdField",void 0),t([a("service","globalIdField",["globalIdField","fields"])],r.prototype,"readGlobalIdFieldFromService",null),t([o({readOnly:!0})],r.prototype,"hasFullEditingRestrictions",null),t([o({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasM",void 0),t([o({readOnly:!0})],r.prototype,"hasUpdateItemRestrictions",null),t([o({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasZ",void 0),t([o({readOnly:!0,type:re})],r.prototype,"heightModelInfo",void 0),t([o({type:Date})],r.prototype,"historicMoment",void 0),t([o({type:dt.ofType(j),readOnly:!0})],r.prototype,"indexes",void 0),t([o({readOnly:!0})],r.prototype,"isTable",void 0),t([a("service","isTable",["type"])],r.prototype,"readIsTableFromService",null),t([o({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],r.prototype,"layerId",void 0),t([o(ge)],r.prototype,"maxScale",void 0),t([a("service","maxScale",["maxScale","effectiveMaxScale"])],r.prototype,"readMaxScale",null),t([o(be)],r.prototype,"minScale",void 0),t([a("service","minScale",["minScale","effectiveMinScale"])],r.prototype,"readMinScale",null),t([o({type:String})],r.prototype,"objectIdField",void 0),t([a("service","objectIdField",["objectIdField","fields"])],r.prototype,"readObjectIdFieldFromService",null),t([o(Q("preferredTimeReference"))],r.prototype,"preferredTimeZone",void 0),t([o({type:[ce],readOnly:!0})],r.prototype,"relationships",void 0),t([o({type:Boolean})],r.prototype,"returnM",void 0),t([o({type:Boolean})],r.prototype,"returnZ",void 0),t([o({readOnly:!0,json:{write:!1}})],r.prototype,"serverGens",void 0),t([o({readOnly:!0})],r.prototype,"serviceDefinitionExpression",void 0),t([a("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],r.prototype,"readServiceDefinitionExpression",null),t([o({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"serviceItemId",void 0),t([o()],r.prototype,"sourceJSON",void 0),t([o({type:yt,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],r.prototype,"spatialReference",void 0),t([o({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],r.prototype,"subtypeField",void 0),t([o({type:[Ke],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"subtypes",void 0),t([o({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],r.prototype,"trackIdField",void 0),t([o(ve)],r.prototype,"url",null),t([l("url")],r.prototype,"writeUrl",null),t([o({json:{origins:{service:{read:!0}},read:!1}})],r.prototype,"version",void 0),t([a("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],r.prototype,"readVersion",null),r=t([p("esri.layers.mixins.FeatureLayerBase")],r),r};export{Wn as a,al as b};
