import{b as o}from"./chunk-TBA3OZMJ.js";async function l(e,t,i){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=n(e));let u=s(e),c=e.capabilities.query.supportsPagination;t.start=0,t.num=u;let r=null;for(;;){let a=await e.source.queryFeaturesJSON(t,i);if(r==null?r=a:r.features=r.features.concat(a.features),r.exceededTransferLimit=a.exceededTransferLimit,!c||!a.exceededTransferLimit)break;t.start+=u}return r}function s(e){return n(e)*f(e)}function f(e){return e.capabilities.query.maxRecordCount||2e3}function n(e){return e.capabilities.query.supportsMaxRecordCountFactor?o.MAX_MAX_RECORD_COUNT_FACTOR:1}export{l as a,s as b};
