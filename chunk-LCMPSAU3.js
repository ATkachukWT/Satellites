import{a as P,b as v,c as F}from"./chunk-CRJDOM7J.js";import{g as D}from"./chunk-YQGS4EZO.js";import{A as g,G as z,c as $,f as C,j as T,t as R,u as p,v as w,w as i,x as f,y as b}from"./chunk-I4Q2S2XA.js";import{c as U}from"./chunk-XITT4JU2.js";import{f as k}from"./chunk-BSMAMABT.js";import{b as h,d as I}from"./chunk-LYNAYPL3.js";import{d as M}from"./chunk-ULANM5YP.js";import{a as S}from"./chunk-KAMRW6HF.js";import{a as x,b as L}from"./chunk-6KRFVLII.js";import{b as d}from"./chunk-OLOKUDVI.js";import{c as u}from"./chunk-YR2HD3ZC.js";import{t as m}from"./chunk-UHRSAPGQ.js";var N=i.fromSimpleMarkerSymbol(P),q=p.fromSimpleLineSymbol(v),A=f.fromSimpleFillSymbol(F),B=new w({symbolLayers:new u([new C({material:{color:x},edges:new $({size:d(1),color:new S(L)})})])}),E=new p({symbolLayers:new u([new T({material:{color:new S([0,0,0])},size:d(1)})])}),O=new f({symbolLayers:new u([new C({outline:{color:new S([0,0,0]),size:d(1)}})])});function mo(o){if(o==null)return null;switch(o.type){case"mesh":return B;case"point":case"multipoint":return N;case"polyline":return q;case"polygon":case"extent":return A}return null}var W="#useCIMFallbackSymbology()",a={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function j(o,l=a){if(!o)return{symbol:null};let{retainId:t=a.retainId,ignoreDrivers:r=a.ignoreDrivers,hasLabelingContext:n=a.hasLabelingContext,retainCIM:y=a.retainCIM,cimFallbackEnabled:s=a.cimFallbackEnabled}=l,e=null;if(g(o)||o instanceof b)e=o.clone();else if(o.type==="cim"){let c=o.data?.symbol?.type;switch(c){case"CIMPointSymbol":e=y?o.clone():i.fromCIMSymbol(o);break;case"CIMLineSymbol":s&&(e=E.clone(),l?.logWarning?.(W,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":s&&(e=O.clone(),l?.logWarning?.(W,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!e)return{error:new m("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${c||"unknown"}' is unsupported in 3D`,{symbol:o})}}else if(o instanceof M)e=p.fromSimpleLineSymbol(o);else if(o instanceof I)e=i.fromSimpleMarkerSymbol(o);else if(o instanceof U)e=i.fromPictureMarkerSymbol(o);else if(o instanceof h)e=l.geometryType&&l.geometryType==="mesh"?w.fromSimpleFillSymbol(o):f.fromSimpleFillSymbol(o);else{if(!(o instanceof k))return{error:new m("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${o.type||o.declaredClass}' is unsupported in 3D`,{symbol:o})};e=n?R.fromTextSymbol(o):i.fromTextSymbol(o)}return t&&e&&e.type!=="cim"&&(e.id=o.id),!r||e.type==="cim"||e instanceof b||e.symbolLayers.forEach(c=>c.ignoreDrivers=!0),{symbol:e}}function vo(o,l,t,r){let n=J(o,{},{context:r,isLabelSymbol:!1});n!=null&&(l[t]=n)}function Fo(o,l,t,r){let n=J(o,{},{context:r,isLabelSymbol:!0});n!=null&&(l[t]=n)}function V(o){return g(o)||o instanceof b}function G(o){return o?.type==="polygon-3d"||o?.type==="line-3d"}function J(o,l,t){if(o==null)return null;let{context:r,isLabelSymbol:n}=t,y=r?.origin,s=r?.messages;if(y==="web-scene"&&!V(o)){let e=j(o,{retainCIM:!0,hasLabelingContext:n});return e.symbol!=null?e.symbol.write(l,r):(s?.push(new m("symbol:unsupported",`Symbols of type '${o.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:o,context:r,error:e.error})),null)}return D(r?.layer)&&G(o)?(s?.push(new m("symbol:unsupported",`Symbols of type '${o.declaredClass}' are not supported on layers of type '${r?.layer?.declaredClass}'.`,{symbol:o,context:r})),null):(y==="web-map"||y==="portal-item"&&!D(r?.layer))&&V(o)?(s?.push(new m("symbol:unsupported",`Symbols of type '${o.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:o,context:r})),null):o.write(l,r)}function $o(o,l){return z(o,null,l)}export{mo as a,a as b,j as c,vo as d,Fo as e,$o as f};
