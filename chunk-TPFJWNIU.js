import{a as rt}from"./chunk-P25RU3X5.js";import{c as it,k as _}from"./chunk-XRRQM4E2.js";import{a as M}from"./chunk-BOVYXYHK.js";import{a as et}from"./chunk-JGEVVXD4.js";import{p as nt,q as st}from"./chunk-B3FO6PT7.js";import{a as Y}from"./chunk-XZIOXVVJ.js";import{m as tt}from"./chunk-LFH24RLM.js";import{b as U,c as $,n as D}from"./chunk-Z5Q7KLA4.js";import{a as G}from"./chunk-4XZ6X7MQ.js";import{B as d,L as K,M as w,a as H,b as J,i as Q,m as x,r as b,t as O,u as B}from"./chunk-KGVXGH6H.js";import{h as L}from"./chunk-IYZFKXJ6.js";import{R as W,v as X}from"./chunk-CKJ56T2Q.js";import{t as N}from"./chunk-UHRSAPGQ.js";function q(n,e,t,s,i,r){return Z[0]=n,Z[1]=e,Z[2]=t,_(Z,s,0,i,r,0)}var Z=M();var z=0,j=class n{static fromGE(e){let t=new n;return t._wkt=e.wkt,t._wkid=e.wkid,t._isInverse=e.isInverse,t}constructor(e){this.uid=z++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=z++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=z++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=z++}getInverse(){let e=new n;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}};var y=class n{static cacheKey(e,t){return[e.wkid?.toString()??"-1",e.wkt?.toString()??"",e.wkt2?.toString()??"",t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??""].join()}static fromGE(e){let t=new n,s="";for(let i of e.steps){let r=j.fromGE(i);t.steps.push(r),s+=r.uid.toString()+","}return t._cachedProjection={},t._gtlistentry=null,t._chain=s,t}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e?.steps)for(let t of e.steps)t instanceof j?this.steps.push(t):this.steps.push(new j({wkid:t.wkid,wkt:t.wkt,isInverse:t.isInverse}))}getInverse(){let e=new n;e.steps=[];for(let t=this.steps.length-1;t>=0;t--){let s=this.steps[t];e.steps.push(s.getInverse())}return e}getGTListEntry(){let e="";for(let t of this.steps)e+=t.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,t,s){this._cachedProjection[n.cacheKey(e,t)]=s}getCachedGeTransformation(e,t){let s="";for(let r of this.steps)s+=r.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=s);let i=this._cachedProjection[n.cacheKey(e,t)];return i===void 0?null:i}};var m=null,g=null,S=null,E={},V=new Y;function C(){return!!m&&H()}function ht(){return!!C()||(L(V),T(),!1)}function Vt(n,e){return!n||!e||v(n,e)||ht()}function Nt(n,e){return!v(n,e)&&!C()}function T(n){return S==null&&(S=Promise.all([J(),import("./chunk-PYV7JJN4.js").then(e=>e.g),import("./chunk-6LZE62SP.js")])),S.then(([,e,{hydratedAdapter:t}])=>{X(n),g=t,m=e.default,m._enableProjection(Q),V.notify()})}function mt(n,e,t=null,s=null){return Array.isArray(n)?n.length===0?[]:($(n),ot(g,n,n[0].spatialReference,e,t,s)):(U(n),ot(g,[n],n.spatialReference,e,t,s)[0])}function ot(n,e,t,s,i=null,r=null){if(t==null||s==null)return e;if(v(t,s,i))return e.map(o=>F(o,t,s));if(i==null&&K(t))return e.map(o=>F(o,t,G.WGS84)).map(o=>A(o,s));if(i==null&&K(s))return e.map(o=>A(o,G.WGS84)).map(o=>F(o,G.WGS84,s));if(i==null){let o=y.cacheKey(t,s);E[o]!==void 0?i=E[o]:((i=gt(t,s,void 0))==null&&(i=new y),E[o]=i)}if(m==null||n==null)throw new R;return r!=null?m._project(n,e,t,s,i,r):m._project(n,e,t,s,i)}function Xt(n,e){let t=dt([n],e);return t.pending!=null?{pending:t.pending,geometry:null}:t.geometries!=null?{pending:null,geometry:t.geometries[0]}:{pending:null,geometry:null}}function dt(n,e){if(!C()){for(let t of n)if(t!=null&&!x(t.spatialReference,e)&&d(t.spatialReference)&&d(e)&&!v(t.spatialReference,e))return L(V),{pending:T(),geometries:null}}return{pending:null,geometries:n.map(t=>t==null?null:x(t.spatialReference,e)?t:d(t.spatialReference)&&d(e)?A(t,e):null)}}function gt(n,e,t=null){if(n==null||e==null)return null;if(m==null||g==null)throw new R;let s=m._getTransformation(g,n,e,t,t?.spatialReference);return s!==null?y.fromGE(s):null}function Yt(n,e,t=null){if(m==null||g==null)throw new R;let s=m._getTransformationBySuitability(g,n,e,t,t?.spatialReference);if(s!==null){let i=[];for(let r of s)i.push(y.fromGE(r));return i}return[]}var R=class extends N{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function Ht(){m=null,g=null,S=null,E={}}var Jt={get loadPromise(){return S}};function A(n,e){try{let t=mt(n,e);if(t==null)return null;"xmin"in n&&"xmin"in t&&(t.zmin=n.zmin,t.zmax=n.zmax);let s=rt(t.type,n.spatialReference,e);return s?.(t),t}catch(t){if(!(t instanceof R))throw t;return null}}async function Qt(n,e,t){let s=n.spatialReference;return s!=null&&e!=null&&await wt(s,e,null,t),A(n,e)}function v(n,e,t){return!t&&(!!x(n,e)||d(n)&&d(e)&&!!it(n,e))}function Ut(n,e){if(x(n,e))return!0;if(!d(n)||!d(e))return!1;let t=b(n)||B(n)||O(n),s=b(e)||B(e)||O(e);return t&&s}async function wt(n,e,t,s){if(C())return W(s);if(Array.isArray(n)){for(let{source:i,dest:r,geographicTransformation:o}of n)if(i&&r&&!v(i,r,o))return T(s)}else if(n&&e&&!v(n,e,t))return T(s);return W(s)}function F(n,e,t){return n?"x"in n?at(n,e,new D,t,0):"xmin"in n?ft(n,e,new tt,t,0):"rings"in n?ct(n,e,new nt,t,0):"paths"in n?ut(n,e,new st,t,0):"points"in n?lt(n,e,new et,t,0):null:null}function $t(n,e,t=e.spatialReference,s=0){return t!=null&&n.spatialReference!=null&&at(n,n.spatialReference,e,t,s)!=null}function at(n,e,t,s,i){u[0]=n.x,u[1]=n.y;let r=n.z;return u[2]=r!==void 0?r:i,_(u,e,0,u,s,0)?(t.x=u[0],t.y=u[1],t.spatialReference=s,r!==void 0||w(s)?(t.z=u[2],t.hasZ=!0):(t.z=void 0,t.hasZ=!1),n.m===void 0?(t.m=void 0,t.hasM=!1):(t.m=n.m,t.hasM=!0),t):null}function Dt(n,e,t=e.spatialReference,s=0){return n.spatialReference!=null&&t!=null&&lt(n,n.spatialReference,e,t,s)!=null}function lt(n,e,t,s,i){let{points:r,hasZ:o,hasM:l}=n,a=[],p=r.length,h=[];for(let c of r)h.push(c[0],c[1],o?c[2]:i);if(!_(h,e,0,h,s,0,p))return null;let f=o||w(s);for(let c=0;c<p;++c){let k=3*c,I=h[k],P=h[k+1];f&&l?a.push([I,P,h[k+2],r[c][3]]):f?a.push([I,P,h[k+2]]):l?a.push([I,P,r[c][2]]):a.push([I,P])}return t.points=a,t.spatialReference=s,t.hasZ=o,t.hasM=l,t}function te(n,e,t=e.spatialReference,s=0){return n.spatialReference!=null&&t!=null&&ut(n,n.spatialReference,e,t,s)!=null}function ut(n,e,t,s,i){let{paths:r,hasZ:o,hasM:l}=n,a=[];if(!pt(r,o??!1,l??!1,e,a,s,i))return null;let p=o||w(s);return t.paths=a,t.spatialReference=s,t.hasZ=p,t.hasM=l,t}function ee(n,e,t=e.spatialReference,s=0){return n.spatialReference!=null&&t!=null&&ct(n,n.spatialReference,e,t,s)!=null}function ct(n,e,t,s,i){let{rings:r,hasZ:o,hasM:l}=n,a=[];if(!pt(r,o??!1,l??!1,e,a,s,i))return null;let p=o||w(s);return t.rings=a,t.spatialReference=s,t.hasZ=p,t.hasM=l,t}function ne(n,e,t=e.spatialReference,s=0){return n.spatialReference!=null&&t!=null&&ft(n,n.spatialReference,e,t,s)!=null}function ft(n,e,t,s,i){let{xmin:r,ymin:o,xmax:l,ymax:a,hasZ:p,hasM:h}=n,f=p?n.zmin:i;if(!q(r,o,f,e,u,s))return null;let c=p||w(s);t.xmin=u[0],t.ymin=u[1],c&&(t.zmin=u[2]);let k=p?n.zmax:i;return q(l,a,k,e,u,s)?(t.xmax=u[0],t.ymax=u[1],c&&(t.zmax=u[2]),h&&(t.mmin=n.mmin,t.mmax=n.mmax),t.spatialReference=s,t):null}function pt(n,e,t,s,i,r,o=0){let l=new Array;for(let h of n)for(let f of h)l.push(f[0],f[1],e?f[2]:o);if(!_(l,s,0,l,r,0))return!1;let a=0;i.length=0;let p=e||w(r);for(let h of n){let f=new Array;for(let c of h)p&&t?f.push([l[a++],l[a++],l[a++],c[3]]):p?f.push([l[a++],l[a++],l[a++]]):t?(f.push([l[a++],l[a++],c[2]]),a++):(f.push([l[a++],l[a++]]),a++);i.push(f)}return!0}var u=M();export{q as a,y as b,C as c,ht as d,Vt as e,Nt as f,T as g,mt as h,ot as i,Xt as j,dt as k,gt as l,Yt as m,Ht as n,Jt as o,A as p,Qt as q,v as r,Ut as s,wt as t,F as u,$t as v,Dt as w,te as x,ee as y,ne as z};
