import{$ as y,A as m,B as E,C as N,I as S,J as I,M as O,N as P,O as V,a as D,aa as q,n as c,o as f,r as d,s as T,u as g,v as J,x as L,y as x,z as j}from"./chunk-MGSAXUID.js";import{a as u,b as l}from"./chunk-GPURZ6GA.js";import{a as v,c as F,d as k,f as i}from"./chunk-HX2VGIR2.js";import{d as p}from"./chunk-64QN2VGD.js";import{a as C}from"./chunk-Z5Q7KLA4.js";function H(t){B=t}var B;function h(t){return t===null?null:m(t)?t.clone():f(t)?t:d(t)?t.clone():j(t)?t.toArray().map(e=>h(e)):i(t)?t.map(e=>h(e)):T(t)?B.createFromArcadeFeature(t):L(t)||g(t)?t:J(t)||t?.declaredClass==="esri.arcade.Attachment"?t.deepClone():(t?.declaredClass==="esri.arcade.Portal"||x(t)||t instanceof D||c(t),t)}function b(t,e,s=!1,r=!1){if(t==null)return null;if(v(t))return O(t);if(F(t))return V(t);if(k(t))return I(t);if(m(t))return P(t,e);if(E(t)||N(t))return t;if(i(t)){let o=[];for(let n of t)o.push(b(n,e,s,r));return o}if(r&&d(t))return t;let a=new A;a.immutable=!1;for(let o of Object.keys(t)){let n=t[o];n!==void 0&&a.setField(o,b(n,e,s,r))}return a.immutable=s,a}var A=class t{constructor(e){this.declaredClass="esri.arcade.Dictionary",this.plain=!1,this.immutable=!0,this.attributes=e instanceof t?e.attributes:e??{}}field(e){let s=e.toLowerCase(),r=this.attributes[e];if(r!==void 0)return r;for(let a in this.attributes)if(a.toLowerCase()===s)return this.attributes[a];throw new l(null,u.FieldNotFound,null,{key:e})}setField(e,s){if(this.immutable)throw new l(null,u.Immutable,null);if(c(s))throw new l(null,u.NoFunctionInDictionary,null);let r=e.toLowerCase();if(s instanceof Date&&(s=p.dateJSToArcadeDate(s)),this.attributes[e]===void 0){for(let a in this.attributes)if(a.toLowerCase()===r)return void(this.attributes[a]=s);this.attributes[e]=s}else this.attributes[e]=s}hasField(e){let s=e.toLowerCase();if(this.attributes[e]!==void 0)return!0;for(let r in this.attributes)if(r.toLowerCase()===s)return!0;return!1}keys(){let e=[];for(let s in this.attributes)e.push(s);return e=e.sort(),e}castToText(e=!1){return S(this.attributes,{useNumbersForDates:e})}static convertObjectToArcadeDictionary(e,s,r=!0,a=!1){let o=new t;o.immutable=!1;for(let n in e){let w=e[n];w!==void 0&&o.setField(n.toString(),b(w,s,r,a))}return o.immutable=r,o}static convertJsonToArcade(e,s,r=!1,a=!1){return b(e,s,r,a)}castAsJson(e=null){let s={};for(let r in this.attributes){let a=this.attributes[r];a!==void 0&&(e?.keyTranslate&&(r=e.keyTranslate(r)),s[r]=y(a,e))}return s}async castDictionaryValueAsJsonAsync(e,s,r,a=null,o){let n=await q(r,a,o);return e[s]=n,n}async castAsJsonAsync(e=null,s=null){let r={},a=[];for(let o in this.attributes){let n=this.attributes[o];s?.keyTranslate&&(o=s.keyTranslate(o)),n!==void 0&&(f(n)||n instanceof C||n instanceof p?r[o]=y(n,s):a.push(this.castDictionaryValueAsJsonAsync(r,o,n,e,s)))}return a.length>0&&await Promise.all(a),r}deepClone(){let e=new t;e.immutable=!1;for(let s of this.keys())e.setField(s,h(this.field(s)));return e}};export{H as a,h as b,A as c};
