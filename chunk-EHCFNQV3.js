import{a as f}from"./chunk-2U44WK2Y.js";import{a as m}from"./chunk-JUMM5VTE.js";import"./chunk-GPDZGV7G.js";import"./chunk-BPX3YT3K.js";import"./chunk-KBDKZSTB.js";import"./chunk-PMVQ5DJK.js";import"./chunk-DVBZA6ZU.js";import{a as p,j as u}from"./chunk-MWSXMSWY.js";import{f as V}from"./chunk-JRCKELO6.js";import"./chunk-YR2HD3ZC.js";import"./chunk-GJASVPF6.js";import"./chunk-XZIOXVVJ.js";import"./chunk-X4LNX4BR.js";import"./chunk-WLHY3MMA.js";import"./chunk-KGVXGH6H.js";import"./chunk-ARRCN5K3.js";import"./chunk-LXQPIAN7.js";import"./chunk-SBHKMV3P.js";import"./chunk-R4A63S45.js";import"./chunk-ETE32IYO.js";import"./chunk-ONUGDWDK.js";import"./chunk-SG7CQU4O.js";import{H as t}from"./chunk-QHVIRF5H.js";import{I as o}from"./chunk-WZDN6K3C.js";import{a}from"./chunk-QGVBCWUY.js";import"./chunk-OJQ73TPF.js";import"./chunk-354SCPDU.js";import"./chunk-OVHPPCBL.js";import"./chunk-IYZFKXJ6.js";import{b as h,e as d,u as n,x as c}from"./chunk-CKJ56T2Q.js";import"./chunk-SNFOAZZQ.js";import"./chunk-F6JAWRPN.js";import{t as w}from"./chunk-UHRSAPGQ.js";import"./chunk-V76GWARL.js";import"./chunk-N2WTMF3X.js";var v=e=>{let i=class extends e{constructor(...s){super(...s),this.layer=null}get interactive(){return this.analysisView!=null&&this.analysisView.interactive}set interactive(s){this.analysisView!=null&&(this.analysisView.interactive=s)}get selectedViewshed(){return this.analysisView!=null?this.analysisView.selectedViewshed:null}set selectedViewshed(s){this.analysisView!=null&&(this.analysisView.selectedViewshed=s)}async createViewsheds(s){if(this.analysisView==null)throw n();await this.analysisView.createViewsheds(s)}};return a([t()],i.prototype,"layer",void 0),a([t()],i.prototype,"interactive",null),a([t()],i.prototype,"selectedViewshed",null),i=a([o("esri.views.layers.ViewshedLayerView")],i),i};var A="analysis-view-handles",r=class extends f(v(m)){constructor(e){super(e),this.type="viewshed-3d",this._analysisModule=null}initialize(){this.addHandles(p(()=>this.layer.source,e=>{this._destroyAnalysisView(),e!=null&&this._createAnalysisView(e)},u),A)}destroy(){this.removeHandles(A),this._destroyAnalysisView()}async whenAnalysisView(){if(this.analysisView!=null)return this.analysisView;if(this._createAnalysisViewTask!=null)return this._createAnalysisViewTask.promise;throw new w("layerview:no-analysisview-for-analysis","The analysis has not been set on the ViewshedLayer of this layer view")}isUpdating(){return this._createAnalysisViewTask!=null||this.analysisView!=null&&this.analysisView.updating}_createAnalysisView(e){let i=V(async s=>(this.analysisView=await this._createAnalysisViewPromise(e,s),this._createAnalysisViewTask===i&&(this._createAnalysisViewTask=null),this.analysisView));this.addResolvingPromise(i.promise),this._createAnalysisViewTask=i}_destroyAnalysisView(){this.analysisView=h(this.analysisView),this._createAnalysisViewTask=d(this._createAnalysisViewTask)}async _createAnalysisViewPromise(e,i){let s=this._analysisModule;if(s==null){let l=await this._loadAnalysisModule();this._analysisModule=l,s=l}let y=new s.default({analysis:e,view:this.view,parent:this});if(await y.when(),c(i)){y.destroy();let l=this.layer.source;throw l!=null&&e!==l?n("Source has changed during creation."):new w("layerview:no-analysisview-for-analysis","The analysis has not been added to the ViewshedLayer of this layer view",{analysis:e})}return y}_loadAnalysisModule(){return import("./chunk-ELHTFDPG.js")}};a([t()],r.prototype,"type",void 0),a([t()],r.prototype,"analysisView",void 0),a([t()],r.prototype,"_createAnalysisViewTask",void 0),r=a([o("esri.views.3d.layers.ViewshedLayerView3D")],r);var C=r;export{C as default};
