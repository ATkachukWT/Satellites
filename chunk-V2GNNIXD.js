import{b as c}from"./chunk-NSYL2RQJ.js";import{a as $,c as p}from"./chunk-ZVCMULXF.js";import{c as i}from"./chunk-KJULKTB5.js";import{b as x}from"./chunk-R4A63S45.js";import{E as y}from"./chunk-ETE32IYO.js";import{h as g,l as L,r as b,t as f}from"./chunk-UHRSAPGQ.js";var O=()=>b.getLogger("esri.intl.substitute");function M(e,t,r={}){let{format:n={}}=r;return L(e,o=>T(o,t,n))}function T(e,t,r){let n,o,a=e.indexOf(":");if(a===-1?n=e.trim():(n=e.slice(0,a).trim(),o=e.slice(a+1).trim()),!n)return"";let s=g(n,t);if(s==null)return"";let u=(o?r?.[o]:null)??r?.[n];return u?A(s,u):o?J(s,o):d(s)}function A(e,t){switch(t.type){case"date":return i(e,t.intlOptions);case"number":return c(e,t.intlOptions);default:return O().warn("missing format descriptor for key {key}"),d(e)}}function J(e,t){switch(t.toLowerCase()){case"dateformat":return i(e);case"numberformat":return c(e);default:return O().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?i(e):/^numberformat/i.test(t)?c(e):d(e)}}function d(e){switch(typeof e){case"string":return e;case"number":return c(e);case"boolean":return""+e;default:return e instanceof Date?i(e):""}}async function S(e,t,r,n){let o=t.exec(r);if(!o)throw new f("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);let a=o[1]?`${o[1]}/`:"",s=o[2],u=p(n),m=`${a}${s}.json`,h=u?`${a}${s}_${u}.json`:m,l;try{l=await B(e(h))}catch(U){if(h===m)throw new f("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:U});try{l=await B(e(m))}catch(D){throw new f("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:D})}}return l}async function B(e){if(N.fetchBundleAsset!=null)return N.fetchBundleAsset(e);let t=await y(e,{responseType:"text"});return JSON.parse(t.data)}var w=class{constructor({base:t="",pattern:r,location:n=new URL(window.location.href)}){let o;o=typeof n=="string"?a=>new URL(a,new URL(n,window.location.href)).href:n instanceof URL?a=>new URL(a,n).href:n,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=o,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return S(this.getAssetUrl,this.matcher,t,r)}};function R(e){return new w(e)}var N={};$(R({pattern:"esri/",location:x}));export{M as a};
