import{h as p}from"./chunk-MWSXMSWY.js";import{c}from"./chunk-YR2HD3ZC.js";import{D as h,H as l}from"./chunk-QHVIRF5H.js";import{I as f}from"./chunk-WZDN6K3C.js";import{a as r}from"./chunk-QGVBCWUY.js";var s=class extends c{constructor(o){super(o),this.getCollections=null}initialize(){this.addHandles(h(()=>this._refresh(),p))}destroy(){this.getCollections=null}_refresh(){let o=this.getCollections!=null?this.getCollections():null;if(o==null)return void this.removeAll();let e=0;for(let n of o)n!=null&&(e=this._processCollection(e,n));this.splice(e,this.length)}_createNewInstance(o){return new c(o)}_processCollection(o,e){if(!e)return o;let n=this.itemFilterFunction??(t=>!!t);for(let t of e)if(t){if(n(t)){let i=this.indexOf(t,o);i>=0?i!==o&&this.reorder(t,o):this.add(t,o),++o}if(this.getChildrenFunction){let i=this.getChildrenFunction(t);if(Array.isArray(i))for(let u of i)o=this._processCollection(o,u);else o=this._processCollection(o,i)}}return o}};r([l()],s.prototype,"getCollections",void 0),r([l()],s.prototype,"getChildrenFunction",void 0),r([l()],s.prototype,"itemFilterFunction",void 0),s=r([f("esri.core.CollectionFlattener")],s);var F=s;export{F as a};
