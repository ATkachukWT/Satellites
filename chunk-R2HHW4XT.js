import{a as y}from"./chunk-LG7DXNE4.js";import{m as p}from"./chunk-BCFGKQ2N.js";import{a as f}from"./chunk-KAMRW6HF.js";function b(i,t){if(i.symbol!=null)return i.symbol;let n=t?.renderer;return n!=null&&n.type!=="dot-density"?n.getSymbol(i,t):null}function v(i,t){let n=b(i,t);if(n==null)return null;let l=t?.renderer,o=new y(l,n);if(l==null||!("visualVariables"in l)||!l.visualVariables)return o;let c=p(l,i,t)??[],e=["proportional","proportional","proportional"];for(let{variable:r,value:a}of c)switch(r.type){case"color":o.color=a.toRgba();break;case"size":if(r.target==="outline")o.outlineSize=a;else{let u=r.axis,s=r.useSymbolValue?"symbol-value":a;switch(u){case"width":e[0]=s;break;case"depth":e[1]=s;break;case"height":e[2]=s;break;case"width-and-depth":e[0]=e[1]=s;break;default:e[0]=e[1]=e[2]=s}}break;case"opacity":o.opacity=a;break;case"rotation":switch(r.axis){case"tilt":o.tilt=a;break;case"roll":o.roll=a;break;default:o.heading=a}}return e[0]==="proportional"&&e[1]==="proportional"&&e[2]==="proportional"||(o.size=e),o}async function d(i,t){return i.symbol!=null?i.symbol:t?.renderer?.getSymbolAsync(i,t)??null}async function V(i,t){let n=await d(i,t);if(!n)return null;let l=t?.renderer,o=new y(l,n);if(!l||!("visualVariables"in l)||!l.visualVariables)return o;let c=p(l,i,t)??[],e=["proportional","proportional","proportional"];for(let{variable:r,value:a}of c)if(r.type==="color")o.color=f.toUnitRGBA(a);else if(r.type==="size")if(r.target==="outline")o.outlineSize=a;else{let u=r.axis,s=r.useSymbolValue?"symbol-value":a;u==="width"?e[0]=s:u==="depth"?e[1]=s:u==="height"?e[2]=s:e[0]=e[1]=u==="width-and-depth"?s:e[2]=s}else r.type==="opacity"?o.opacity=a:r.type==="rotation"&&r.axis==="tilt"?o.tilt=a:r.type==="rotation"&&r.axis==="roll"?o.roll=a:r.type==="rotation"&&(o.heading=a);return(isFinite(e[0])||isFinite(e[1])||isFinite(e[2]))&&(o.size=e),o}function w(i,t=0){let n=i[t];return typeof n=="number"&&isFinite(n)?n:null}function k(i){for(let t=0;t<3;t++){let n=i[t];if(typeof n=="number")return isFinite(n)?n:0}return 0}export{v as a,V as b,w as c,k as d};
