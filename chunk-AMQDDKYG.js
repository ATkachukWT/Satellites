import{b as lt}from"./chunk-THZF7PGR.js";import"./chunk-J4YX6XRI.js";import{c as Xe}from"./chunk-IE6LCR36.js";import"./chunk-SCNTWYD2.js";import"./chunk-K3Z3MI77.js";import"./chunk-35XAFVAL.js";import"./chunk-C3PAYYXB.js";import{a as Ye,b as q}from"./chunk-3CWCNPAI.js";import"./chunk-UCYOLKZK.js";import"./chunk-WTZT4FKW.js";import"./chunk-6FDNNAVT.js";import"./chunk-FYZRIMPP.js";import"./chunk-VYI3HIPB.js";import"./chunk-WI3QVC6K.js";import"./chunk-SDA472RA.js";import"./chunk-LXYWEX2U.js";import"./chunk-IBSCSNYA.js";import"./chunk-SPPN4AOM.js";import"./chunk-TY4DYZZJ.js";import{d as pt}from"./chunk-JVF2DMWU.js";import"./chunk-34RMJISL.js";import"./chunk-54P55TN4.js";import"./chunk-BVDJBTNQ.js";import"./chunk-LSUWBOLF.js";import"./chunk-LHI3UGTZ.js";import{f as mt}from"./chunk-6SGUOKGX.js";import"./chunk-LCFWGHLF.js";import"./chunk-XACQ2RJ5.js";import"./chunk-3TRID6QS.js";import{i as ft}from"./chunk-VUJT53YX.js";import"./chunk-WUXNV6ZW.js";import"./chunk-PM3EZWDJ.js";import"./chunk-KE2U7ENE.js";import"./chunk-PSFZFYFC.js";import"./chunk-WIFM6OT5.js";import"./chunk-GI4NW5SA.js";import{b as ct}from"./chunk-F4FOXK2P.js";import"./chunk-T5NHE3SD.js";import{a as ut,b as ht}from"./chunk-SWCOPTUX.js";import"./chunk-7EWNVUY7.js";import"./chunk-SXYHD4V6.js";import"./chunk-FSW536RM.js";import"./chunk-YNDA4ZZB.js";import"./chunk-JAN3FVXP.js";import"./chunk-F4HA2HQL.js";import"./chunk-BSKAVVQS.js";import"./chunk-AEU2INWT.js";import"./chunk-Z4UBZ6W2.js";import"./chunk-CMKJEBQJ.js";import"./chunk-AQMR24IC.js";import"./chunk-3J3Q4LMA.js";import"./chunk-PSNQ2KG3.js";import"./chunk-LIKQ6DPU.js";import"./chunk-H6LI7TZP.js";import"./chunk-2IWALBQY.js";import"./chunk-IVHM64W3.js";import"./chunk-QQ5W5TEP.js";import"./chunk-YQHQQW4I.js";import"./chunk-7V6BRQYE.js";import"./chunk-IZU6TNEP.js";import"./chunk-DNN7JJKY.js";import"./chunk-Y7XG5IWW.js";import"./chunk-X5NPIY3C.js";import"./chunk-JXRFF2VE.js";import"./chunk-7WCQBAQY.js";import"./chunk-V4ZQZTCB.js";import"./chunk-PEYNLMWW.js";import"./chunk-FQIIIJGL.js";import"./chunk-SZTSN5BD.js";import"./chunk-VAOSSSLB.js";import"./chunk-6L543SC5.js";import"./chunk-CUV3BSEW.js";import"./chunk-6FI5AY7X.js";import"./chunk-ZCAR53EN.js";import"./chunk-DH67ILIV.js";import"./chunk-7GUYYJRR.js";import"./chunk-WS4AMEGN.js";import"./chunk-CU7FHMWW.js";import"./chunk-CSFAHB4Y.js";import"./chunk-AMISFAT3.js";import"./chunk-PTXLSCMJ.js";import"./chunk-NRRX2M6N.js";import"./chunk-PMLKCTEJ.js";import"./chunk-MYO2G5ZH.js";import"./chunk-MTUYS77G.js";import"./chunk-EG2DTURK.js";import"./chunk-57FV5BVL.js";import"./chunk-YVCKQBWT.js";import"./chunk-4XEE5PE3.js";import"./chunk-MBNZK2RR.js";import"./chunk-DV6KBPBR.js";import"./chunk-XWEUR6F7.js";import"./chunk-KALTBP5D.js";import"./chunk-O2J7LFYY.js";import"./chunk-422PSKZ7.js";import"./chunk-SFANISLX.js";import"./chunk-5L4CW2H2.js";import"./chunk-UJ7KVQR6.js";import"./chunk-B74L7AUE.js";import"./chunk-MJO3PLZV.js";import"./chunk-YU3IFRYW.js";import"./chunk-XKFJ6GWH.js";import"./chunk-GSXOR3JU.js";import"./chunk-55OTJIMU.js";import"./chunk-EM2AEAFS.js";import"./chunk-VGAXEXH3.js";import"./chunk-YEPHAEAY.js";import"./chunk-76X7RFM4.js";import"./chunk-HMNTGQTR.js";import"./chunk-ZLIWNUFM.js";import"./chunk-GVSOJUIP.js";import"./chunk-GWSX6PRO.js";import"./chunk-ELCBU4NP.js";import"./chunk-GMZFCQJQ.js";import"./chunk-5WDH2LXO.js";import"./chunk-L7NOU4T2.js";import"./chunk-SU7IJ65K.js";import"./chunk-WOZSH7YY.js";import"./chunk-2PJRHNJW.js";import"./chunk-B2RVSTL3.js";import"./chunk-2CKJLDTO.js";import"./chunk-F6TN7E7K.js";import"./chunk-HUUJBVXR.js";import"./chunk-4LDVFWME.js";import"./chunk-A45BLB26.js";import"./chunk-DFYW3Y3B.js";import"./chunk-UBQPWKE4.js";import"./chunk-YSD7LK2L.js";import{a as dt}from"./chunk-LXEWGICX.js";import"./chunk-NIYDRLW4.js";import"./chunk-4K47EN3B.js";import"./chunk-FGY3YBPM.js";import"./chunk-EDOVNTC7.js";import"./chunk-FSWSNKJD.js";import"./chunk-MVDZB4AK.js";import"./chunk-ESSDCWGF.js";import"./chunk-WVKBXQWE.js";import"./chunk-FGEB67EG.js";import"./chunk-YEXMIDOT.js";import"./chunk-GV3ZFCVD.js";import"./chunk-SOEEM7Z7.js";import"./chunk-T7PUQGWM.js";import"./chunk-44A27HB7.js";import"./chunk-47NSYSFY.js";import"./chunk-QXNVQZT7.js";import"./chunk-CAXK5KYB.js";import"./chunk-3CCK7BDD.js";import"./chunk-LNYBTIG7.js";import"./chunk-VYZHOYXV.js";import"./chunk-K7YQAHQ7.js";import"./chunk-XAHD7XBV.js";import"./chunk-J6YGDWJF.js";import{b as S}from"./chunk-YQNUGDFH.js";import{a as at}from"./chunk-QCZ3ZIGQ.js";import"./chunk-ONYJLWAD.js";import"./chunk-VMECOA4F.js";import"./chunk-PHODKV66.js";import"./chunk-JPMGMA4B.js";import"./chunk-3REMXE4W.js";import"./chunk-4ABKPPKG.js";import"./chunk-PMVQ5DJK.js";import"./chunk-I4Q2S2XA.js";import{a as it,b as ot}from"./chunk-V774RJYN.js";import"./chunk-L2WNUKLP.js";import"./chunk-XITT4JU2.js";import"./chunk-ZBX6HJOS.js";import"./chunk-BSMAMABT.js";import"./chunk-LYNAYPL3.js";import"./chunk-ULANM5YP.js";import"./chunk-KAMRW6HF.js";import"./chunk-6DGDLLNL.js";import"./chunk-UWWWQ44M.js";import{b as et}from"./chunk-BHB4UQZT.js";import"./chunk-DJW5LMRG.js";import"./chunk-SEJXLJ5V.js";import"./chunk-MPAJA3DL.js";import{a as A}from"./chunk-ALWV3RJ2.js";import"./chunk-DEH76MSI.js";import{c as st}from"./chunk-KWBPUP6A.js";import{b as _e}from"./chunk-TBA3OZMJ.js";import"./chunk-S4QV2MGO.js";import"./chunk-IRI7XXYY.js";import"./chunk-DDZ3KR2Q.js";import"./chunk-USMAJP2P.js";import"./chunk-PHNFWHVF.js";import"./chunk-4N5OXIEM.js";import{b as rt,c as nt}from"./chunk-RROJCQBD.js";import{a as tt}from"./chunk-3CDCI3XM.js";import"./chunk-W26XKMAT.js";import"./chunk-NQWYPF77.js";import"./chunk-G27DRLGO.js";import"./chunk-KRAKR4MK.js";import"./chunk-MCO7DSFO.js";import"./chunk-D7WE3OBT.js";import{a as Ve}from"./chunk-CDP4MSRO.js";import"./chunk-BCSLWH5H.js";import"./chunk-TOH4K6HW.js";import"./chunk-UP6FLASM.js";import"./chunk-DGBDFGKO.js";import"./chunk-44S2QQS2.js";import"./chunk-DQOFEB5P.js";import"./chunk-JTDXB5TK.js";import"./chunk-2NP7F5RO.js";import"./chunk-7QY3BMVN.js";import{a as He}from"./chunk-XEZTJAR4.js";import{a as j}from"./chunk-BUP3AMMF.js";import{b as U,e as We,g as v,h as ze}from"./chunk-XCIPBOI4.js";import"./chunk-CWUY5SXW.js";import{d as Ne,e as Qe,u as ke}from"./chunk-KD27XIJC.js";import{h as $e,t as Je}from"./chunk-TPFJWNIU.js";import"./chunk-P25RU3X5.js";import{k as qe}from"./chunk-XRRQM4E2.js";import"./chunk-GWBRHLNH.js";import"./chunk-G7TP3ZYQ.js";import{a as Ze,d as Ke}from"./chunk-Y6YEAKJ5.js";import"./chunk-S52JRLJC.js";import"./chunk-U4TLMQTY.js";import"./chunk-PDQQY7RQ.js";import"./chunk-W5OI4BJ2.js";import{a as p}from"./chunk-RWCIDBNQ.js";import"./chunk-2NH7HOKA.js";import"./chunk-HM5RIVQC.js";import"./chunk-EM35R6FY.js";import"./chunk-2ZFXOJDB.js";import"./chunk-QXXXCEV5.js";import"./chunk-6B5XFA6F.js";import"./chunk-M67YQAIX.js";import"./chunk-NHEQ4TAR.js";import"./chunk-BIRSPTTF.js";import"./chunk-IZLELRQR.js";import"./chunk-7EMOONQX.js";import"./chunk-RZF6KTKU.js";import"./chunk-HP4LYRR4.js";import"./chunk-AFC2H4Q3.js";import"./chunk-OLOKUDVI.js";import"./chunk-4G7UTTZJ.js";import{a as Pe,c as je,d as Ge,f as Le,i as De}from"./chunk-ZTOZWLEE.js";import"./chunk-RJWOVI3M.js";import{b as Ue}from"./chunk-SP2CO3KX.js";import"./chunk-NRBJLISB.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-RSDQHAJX.js";import{a as T,e as ge}from"./chunk-BOVYXYHK.js";import"./chunk-FENRIY2T.js";import"./chunk-5HJY3X5Y.js";import"./chunk-6RZAM42M.js";import"./chunk-WDETDPZG.js";import"./chunk-HX2VGIR2.js";import"./chunk-64QN2VGD.js";import"./chunk-JGEVVXD4.js";import"./chunk-B3FO6PT7.js";import"./chunk-C4UMJHQC.js";import"./chunk-BCREO4Q5.js";import{e as Oe,f as Fe,o as Be,v as Ee}from"./chunk-LXFQWIWE.js";import"./chunk-QT6UNBJP.js";import{a as Se,i as Re}from"./chunk-MWSXMSWY.js";import"./chunk-JRCKELO6.js";import"./chunk-ZVCMULXF.js";import"./chunk-KJULKTB5.js";import"./chunk-LACL4BQ2.js";import"./chunk-YR2HD3ZC.js";import{a as V}from"./chunk-GJASVPF6.js";import"./chunk-UBFCO3DV.js";import{a as fe}from"./chunk-NMRTZBDM.js";import{a as Te}from"./chunk-BUSG3ZOF.js";import"./chunk-XZIOXVVJ.js";import"./chunk-EXJYW3PC.js";import"./chunk-SXQPBCOX.js";import{m as Me}from"./chunk-LFH24RLM.js";import"./chunk-Z5Q7KLA4.js";import"./chunk-X4LNX4BR.js";import{a as pe}from"./chunk-4XZ6X7MQ.js";import"./chunk-WLHY3MMA.js";import"./chunk-KGVXGH6H.js";import"./chunk-ARRCN5K3.js";import"./chunk-LXQPIAN7.js";import"./chunk-FTDD7QBB.js";import"./chunk-DB3UIQCU.js";import"./chunk-SBHKMV3P.js";import"./chunk-R4A63S45.js";import"./chunk-ETE32IYO.js";import"./chunk-ONUGDWDK.js";import"./chunk-SG7CQU4O.js";import{H as x,J as Ae}from"./chunk-QHVIRF5H.js";import{I as H}from"./chunk-WZDN6K3C.js";import{a as g}from"./chunk-QGVBCWUY.js";import"./chunk-OJQ73TPF.js";import"./chunk-354SCPDU.js";import"./chunk-OVHPPCBL.js";import"./chunk-IYZFKXJ6.js";import{D as ve,u as he,v as P}from"./chunk-CKJ56T2Q.js";import"./chunk-SNFOAZZQ.js";import"./chunk-F6JAWRPN.js";import{t as Ce}from"./chunk-UHRSAPGQ.js";import{a as me,w as Ie}from"./chunk-V76GWARL.js";import{a as W,b as z}from"./chunk-N2WTMF3X.js";var y=class extends Ae{constructor(s){super(s),this._updatingCount=0,this._tileHandles=new fe,this._wanted=new fe}destroy(){for(let s of this._tileHandles.values())s.abort();this._tileHandles.clear(),this._wanted.clear()}get updating(){return this._updatingCount>0}get _boundingRect(){let{extent:s}=this;return s==null?null:Oe(s)}get _missingTiles(){let s=new Array,e=this._wanted;for(let t of this._tileHandles.values())e.has(t.id)&&!G(t)&&s.push(t);return s}async onTileTreeChange(s){++this._updatingCount;try{let{added:e,removed:t}=s,r=this._tileHandles,{_boundingRect:n}=this,i=n!=null?e.filter(d=>Ee(n,d.extent)):e,o=this._wanted,a=new Array;for(let d of t){let{id:c}=d;if(o.delete(c),e.some(u=>R(u,d)||R(d,u)))continue;let l=r.get(c);l!=null&&a.push(this._removeTile(l))}for(let d of i)o.set(d.id,d),a.push(this._addTile(d));await Promise.allSettled(a)}finally{--this._updatingCount}}async _removeTile(s){this._tileHandles.delete(s.id),s.abort(),this._validate();let{tile:e}=s,t=new M(s.untilSettled(),e!=null?this.createRemoveTileCommand(e):null);s.nextEvent=null;let{command:r}=await t.getCommand();r?.execute()}async _addTile(s){let{_tileHandles:e}=this,t=e.get(s.id);if(t!=null)return!G(t)||t.tile.isComplete||(t.tile=t.tile.reset(),t.nextEvent=this._onTileLoad(t)),void await t.untilSettled();let r=new ye(s);this._tileHandles.set(r.id,r);let n=this.loadTile(s,r.signal);r.nextEvent=n;let i=await n;if(r.aborted)throw he();r.tile=i,At(r),r.nextEvent=this._onTileLoad(r),await r.untilSettled()}async _onTileLoad(s){let{_wanted:e,_tileHandles:t,_missingTiles:r}=this,n=s.descriptor,i=new Array,o=new Array,a=new Set;for(let c of t.values()){if(c===s)continue;let{descriptor:l,id:u}=c;if(e.has(u)||r.some(({descriptor:h})=>R(h,l)||R(l,h))){if(G(c)){if(R(n,l)){let h=c.tile;for(let m of h.objectIds())a.add(m)}if(R(l,n)){let h=s.tile,m=new Set(h.objectIds()),f=c.tile,_=f.exclude(m);c.tile=_;let b=AbortSignal.any([c.signal,s.signal]),w=c.untilSettled();i.push(new M(w,this.createRemoveTileCommand(f))),i.push(new M(w,this.createAddTileCommand(_,b),b)),o.push(c),this._validateRemoval(_,m)}}}else{c.abort(),t.delete(u);let{tile:h}=c;h!=null&&i.push(new M(c.untilSettled(),this.createRemoveTileCommand(h))),c.nextEvent=null}}a.size>0&&(s.tile=s.tile.exclude(a),this._validateRemoval(s.tile,a)),i.push(new M(s.untilSettled(),this.createAddTileCommand(s.tile,s.signal),s.signal)),o.push(s),this._validate();let d=this._joinCommands(i);for(let c of o)c.nextEvent=d;await d}async _joinCommands(s){let e=(await Promise.allSettled(s.map(async t=>t.getCommand()))).map(t=>t.status!=="fulfilled"||t.value.signal?.aborted?null:t.value.command).filter(Ie);e.length!==0&&e.reduce((t,r)=>(t.append(r),t)).execute()}_validate(){if(!me("feature-pipeline-3d-test-validation"))return;let s=new Array;for(let e of this._tileHandles.values()){if(!G(e))continue;let{tile:t}=e,r=t.featureCount,n=new Uint32Array(r);t.readObjectIds(n),s.push({tile:t,objectIds:new Set(n)})}for(let e=0;e<s.length;++e){let{tile:t,objectIds:r}=s[e];for(let n=e+1;n<s.length;++n){let{tile:i,objectIds:o}=s[n];for(let a of o)if(r.has(a)){let d=R(i.descriptor,t.descriptor),c=R(t.descriptor,i.descriptor);throw new Error(`${t.descriptor.id} and ${i.descriptor.id} both contain ${a}. aInB: ${d}; bInA: ${c}`)}}}}_validateRemoval(s,e){if(me("feature-pipeline-3d-test-validation")){for(let t of s.objectIds())if(e.has(t))throw new Error(`Failed to remove ${t} from ${s.descriptor.id}!`)}}};function R({lij:[s,e,t]},{lij:[r,n,i]}){let o=r-s;return o>=0&&e===n>>o&&t===i>>o}g([x()],y.prototype,"updating",null),g([x({constructOnly:!0})],y.prototype,"loadTile",void 0),g([x({constructOnly:!0})],y.prototype,"createAddTileCommand",void 0),g([x({constructOnly:!0})],y.prototype,"createRemoveTileCommand",void 0),g([x()],y.prototype,"_updatingCount",void 0),g([x()],y.prototype,"extent",void 0),g([x()],y.prototype,"_boundingRect",null),g([x()],y.prototype,"_missingTiles",null),y=g([H("esri.views.3d.layers.graphics.pipeline.Tile3DManager")],y);var ye=class{constructor(e){this.descriptor=e,this._controller=new AbortController,this._tile=Te(null),this.nextEvent=null}get id(){return this.descriptor.id}get tile(){return this._tile.value}set tile(e){this._tile.value=e}get signal(){return this._controller.signal}abort(){this._controller.abort()}get aborted(){return this._controller.signal.aborted}async untilSettled(){try{await this.nextEvent}catch(e){ve(e)||console.error(e)}}};function G(s){return s.tile!=null}function At(s){if(!G(s))throw new Error}var M=class{constructor(e,t,r){this.previousEventSettled=e,this.commandPromise=t,this.signal=r}async getCommand(){let{previousEventSettled:e,commandPromise:t,signal:r}=this,[n]=await Promise.all([t,e]);if(r?.aborted)throw he();return{command:n,signal:r}}};var $=class s{constructor(e,t){this.tile=e,this._tileIndices=t}get id(){return this.tile.id}get featureCount(){return this._tileIndices?.length??this.tile.featureCount}get usedMemory(){return v+(this._tileIndices?.byteLength??0)}get extent(){return this.tile.descriptor.extent}readObjectIds(e,t){let{_tileIndices:r,tile:n}=this;return n.readObjectIds(e,r,t)}readCoordinates(e,t){let{_tileIndices:r,tile:n}=this;return n.readCoordinates(e,r,t)}subset(e){let{_tileIndices:t,tile:r}=this;if(t==null)return new s(r,e);let n=new Uint32Array(e.length);for(let i=0;i<n.length;++i)n[i]=t[e[i]];return new s(r,n)}};var J=class{constructor(){this._tileToFeatureData=new Map}add(e){this._tileToFeatureData.set(e.tile,e)}remove(e){this._tileToFeatureData.delete(e)}get(e){return this._tileToFeatureData.get(e)}};var D=class{constructor(e,t){this._index=e,this._view=t}get usedMemory(){return v+U}getObjectId(){return this._view.getObjectId(this._index)}getAttribute(e){return this._view.getAttribute(this._index,e)}getAttributeAsTimestamp(e){return this._view.getAttributeAsTimestamp(this._index,e)}getAttributes(){return this._view.getAttributes(this._index)}getOptimizedGeometry(){return this._view.getOptimizedGeometry(this._index)}getCentroid(e){return this._view.getCentroid(this._index,e)}getBounds(){return this._view.getBounds(this._index)}getBoundingBox(){return this._view.getBoundingBox(this._index)}cloneWithGeometry(e){return new xe(this._index,this._view,e)}},xe=class extends D{constructor(e,t,r){super(e,t),this._geometryOverride=r}getOptimizedGeometry(){return this._geometryOverride}getCentroid(e){return He(new j,this._geometryOverride,e.hasZ,e.hasM)}},X=class{constructor(){this._tileBounds=new Map,this.events=new V,this.featureAdapter=N.shared}get usedMemory(){return v+v*this._tileBounds.size}addTile(e){let{featureCount:t}=e;if(t===0)return;let r=new Ye(9,i=>e.getBounds(i)),n=new Array;for(let i=0;i<t;++i)n[i]=i;r.load(n),this._tileBounds.set(e,r),this.events.emit("changed")}removeTile(e){this._tileBounds.delete(e),this.events.emit("changed")}clear(){this._tileBounds.clear(),this.events.emit("changed")}forEach(e){for(let[t,r]of this._tileBounds)r.all(n=>e(new D(n,t)))}forEachInBounds(e,t){L.minX=e[0],L.minY=e[1],L.maxX=e[2],L.maxY=e[3];for(let[r,n]of this._tileBounds)n.search(L,i=>t(new D(i,r)))}forEachBounds(e,t){for(let r of e)t(r.getBoundingBox())}getFullExtent(e){let t=1/0,r=1/0,n=-1/0,i=-1/0;for(let o of this._tileBounds.values()){let{minX:a,minY:d,maxX:c,maxY:l}=o.toJSON();t=Math.min(t,a),r=Math.min(r,d),n=Math.min(n,c),i=Math.min(i,l)}return{xmin:t,ymin:r,xmax:n,ymax:i,spatialReference:e}}},N=class{getObjectId(e){return e.getObjectId()}getAttribute(e,t){return e.getAttribute(t)}getAttributeAsTimestamp(e,t){return e.getAttributeAsTimestamp(t)}getAttributes(e){return e.getAttributes()}getGeometry(e){return e.getOptimizedGeometry()}getCentroid(e,t){return e.getCentroid(t)}cloneWithGeometry(e,t){return e.cloneWithGeometry(t)}};N.shared=new N;var L=new q;var Y=class s{constructor(e,t,r=St(t)){this.descriptor=e,this._pages=t,this._addressTable=r;let n=ze+t.reduce((a,{usedMemory:d})=>a+d,0),i=3*U,o=We(r);this.usedMemory=v+n+i+o,this.featureCount=Math.floor(this._addressTable.length/2),this.isComplete=this.featureCount===t.reduce((a,d)=>a+d.featureCount,0)}get id(){return this.descriptor.id}getObjectId(e){let{pageIndex:t,featurePageIndex:r}=this._translateIndex(e);return this._pages[t].getObjectId(r)}getAttribute(e,t){let{pageIndex:r,featurePageIndex:n}=this._translateIndex(e);return this._pages[r].getAttribute(n,t)}getAttributeAsTimestamp(e,t){let{pageIndex:r,featurePageIndex:n}=this._translateIndex(e);return this._pages[r].getAttributeAsTimestamp(n,t)}getAttributes(e){let{pageIndex:t,featurePageIndex:r}=this._translateIndex(e);return this._pages[t].getAttributes(r)}getCoordinates(e,t,r){let{pageIndex:n,featurePageIndex:i}=this._translateIndex(e);this._pages[n].getCoordinates(i,t,r)}getOptimizedGeometry(e){let{pageIndex:t,featurePageIndex:r}=this._translateIndex(e);return this._pages[t].getOptimizedGeometry(r)}getCentroid(e,t){let{pageIndex:r,featurePageIndex:n}=this._translateIndex(e);return this._pages[r].getCentroid(n,t)}getBounds(e){let{pageIndex:t,featurePageIndex:r}=this._translateIndex(e);return this._pages[t].getBounds(r)}getBoundingBox(e){let{pageIndex:t,featurePageIndex:r}=this._translateIndex(e);return this._pages[t].getBoundingBox(r)}readObjectIds(e,t=this._allFeatureIndices(),r=0){let n=r;for(let{page:i,indices:o}of this._batchPageIndices(t))n=i.readObjectIds(e,o,n);return n}readCoordinates(e,t=this._allFeatureIndices(),r=0){let n=r;for(let{page:i,indices:o}of this._batchPageIndices(t))n=i.readCoordinates(e,o,n);return n}*objectIds(e=this._allFeatureIndices()){for(let{page:t,indices:r}of this._batchPageIndices(e))for(let n of t.objectIds(r))yield n}exclude(e){if(e.size===0)return this;let{_addressTable:t,featureCount:r}=this,n=new Array;for(let i=0;i<r;++i){let o=this.getObjectId(i);e.has(o)||(n.push(t[2*i]),n.push(t[2*i+1]))}return new s(this.descriptor,this._pages,n)}reset(){let{isComplete:e,_pages:t}=this;return e?this:new s(this.descriptor,t)}*_allFeatureIndices(){let{featureCount:e}=this;for(let t=0;t<e;++t)yield t}_translateIndex(e){let{_addressTable:t}=this;return{pageIndex:t[2*e],featurePageIndex:t[2*e+1]}}*_batchPageIndices(e){let t=new Array;{let n=0,i=new Array;for(let o of e){let{pageIndex:a,featurePageIndex:d}=this._translateIndex(o);n!==a&&(i.length!==0&&t.push({pageIndex:n,indices:i}),n=a,i=[]),i.push(d)}i.length!==0&&t.push({pageIndex:n,indices:i})}let{_pages:r}=this;for(let{pageIndex:n,indices:i}of t)yield{page:r[n],indices:i}}};function St(s){let e=s.reduce((n,{featureCount:i})=>n+i,0),t=new Array;if(e===0)return t;let r=s[0].featureCount;for(let n=0;n<e;++n)t[2*n]=Math.floor(n/r),t[2*n+1]=n%r;return t}var K=class{constructor(e){this._reader=new tt(new Uint8Array(e),new DataView(e)),this._index=Rt(this._reader)}get featureCount(){return this._index.featureIndices.length}get exceededTransferLimit(){return this._index.exceededTransferLimit}get usedMemory(){return this._reader.usedMemory}getObjectId(e){return this.getAttribute(e,this._index.objectIdFieldName)}getAttribute(e,t){let{_index:{fieldsIndex:r,attributeIndices:n}}=this,i=r.get(t)?.index;if(i==null)return;let o=n[e*r.fields.length+i],a=this._reader;return a.move(o),Z(a)}getAttributeAsTimestamp(e,t){let r=this.getAttribute(e,t);return typeof r=="string"?new Date(r).getTime():typeof r=="number"||r==null?r:null}getAttributes(e){let{_index:{fieldsIndex:t,attributeIndices:r}}=this,n=e*t.fields.length,i=this._reader,o={};for(let a of t.fields){let d=r[n+a.index];i.move(d),o[a.name]=Z(i)}return o}getCoordinates(e,t,r=0){let n=this._reader,{transform:i,featureIndices:o}=this._index,{scale:a,translate:d}=i;n.move(o[e]),this._readCoordinates(a,d,t,r)}getOptimizedGeometry(e){let t=T();return this.getCoordinates(e,t),new j([],t)}getCentroid(e,{hasZ:t,hasM:r}){this.getCoordinates(e,F);let[n,i,o]=F,a=[n,i];return t&&(a[3]=o),r&&(a[t?4:3]=0),new j([],a)}getBounds(e){this.getCoordinates(e,F);let[t,r]=F,n=new q;return n.minX=t,n.minY=r,n.maxX=t,n.maxY=r,n}getBoundingBox(e){this.getCoordinates(e,F);let[t,r,n]=F;return Qe(t,r,n,t,r,n)}readObjectIds(e,t=this._allFeatureIndices(),r=0){let n=this._reader,{objectIdFieldName:i,attributeIndices:o,fieldsIndex:a}=this._index,d=a.get(i).index,c=a.fields.length;for(let l of t){let u=o[l*c+d];n.move(u),e[r++]=Z(n)}return r}readCoordinates(e,t=this._allFeatureIndices(),r=0){let n=this._reader,{transform:i,featureIndices:o}=this._index,{scale:a,translate:d}=i;for(let c of t){let l=o[c];n.move(l),r=this._readCoordinates(a,d,e,r)}return r}*objectIds(e=this._allFeatureIndices()){let t=this._reader,{objectIdFieldName:r,attributeIndices:n,fieldsIndex:i}=this._index,o=i.get(r).index,a=i.fields.length;for(let d of e){let c=n[d*a+o];t.move(c),yield Z(t)}}*_allFeatureIndices(){let{featureCount:e}=this;for(let t=0;t<e;++t)yield t}_readCoordinates([e,t,r],[n,i,o],a,d){let u=this._reader,h=u.getLength(),m=u.pos()+h;for(;u.pos()<m&&u.next();)switch(u.tag()){case 2:{let f=u.getLength(),_=u.pos()+f;for(;u.pos()<_&&u.next();)u.tag()===3?(u.getUInt32(),a[d++]=n+e*u.getSInt64(),a[d++]=i+t*u.getSInt64(),a[d++]=o+r*u.getSInt64()):u.skip();break}default:u.skip()}return d}};function Rt(s){for(;s.next();){if(s.tag()===2)return Tt(s.getMessage());s.skip()}ee()}function Tt(s){for(;s.next();){if(s.tag()===1)return Mt(s.getMessage());s.skip()}ee()}function Mt(s){let l,u,h=!1,m=!1,f=0,_=new Array,b=new Array,w=new Array;for(;s.next();)switch(s.tag()){case 1:u=s.getString();break;case 7:s.getEnum()!==0&&ee();break;case 9:h=s.getBool()??!1;break;case 12:l=Ue(s.processMessage(nt));break;case 13:{let I=s.processMessage(rt);I.index=f++,_.push(I);break}case 15:{b.push(s.pos());let I=s.getUInt32(),ue=s.pos()+I;for(;s.pos()<ue&&s.next();)s.tag()===1&&w.push(s.pos()),s.skip();break}case 10:m=s.getBool()??!1;break;default:s.skip()}let O=new Ve(_);return l!=null&&m&&u!=null&&O.has(u)||ee(),{transform:l,exceededTransferLimit:h,fieldsIndex:O,objectIdFieldName:u,featureIndices:b,attributeIndices:w}}function ee(){let s=new Ce("pbf-parsing-failed","Error while parsing PBF",new Error);throw console.error(s),s}function Z(s){let l=s.getLength(),u=s.pos()+l;for(;s.pos()<u&&s.next();)switch(s.tag()){case 1:return s.getString();case 2:return s.getFloat();case 3:return s.getDouble();case 4:return s.getSInt32();case 5:return s.getUInt32();case 6:return s.getInt64();case 7:return s.getUInt64();case 8:return s.getSInt64();case 9:return s.getBool();default:return s.skip(),null}return null}var F=T();var gt=8e3,Ot=4,Ft=4,te=class{constructor(e,t,r,n,i){this.spatialReference=e,this.url=r,this.objectIdField=n,this.capabilities=i;let{supportsMaxRecordCountFactor:o,maxRecordCount:a}=this.capabilities.query,d=o?Ot:1,c=(a??gt)*d;this._pageSize=Math.min(gt,c);let l=t.clone();l.cacheHint=!0,l.resultType="tile",l.outSpatialReference=e,l.returnGeometry=!0,l.returnZ=!0,l.maxRecordCountFactor=d,l.num=this._pageSize,l.outFields=[n],this._baseQuery=l}async fetch(e,t){let{spatialReference:r}=this,n=Fe(e.extent,r),i=this._baseQuery.clone();i.geometry=n;let o=new Array,a=0,d=!1,c=1;for(;!d;){let l=[];for(let h=0;h<c;++h)l.push(this._fetchPage(i,a++,t));let u=await Promise.all(l);P(t);for(let h of u){let m=h.featureCount!==0;d||=!h.exceededTransferLimit||!m,m&&o.push(h)}c=Math.min(c+1,Ft)}return new Y(e,o)}async _fetchPage(e,t,r){let n=e.clone();n.start=t*this._pageSize;let i=(await st(this.url,n,{signal:r})).data;return P(r),new K(i)}};var Q=class{constructor(e){this._bufferWriter=null,this._bufferWriter=e.createBufferWriter()}createBuffer(e,t){let r=this._bufferWriter,n=null;if(e.transformation&&t)Pe(B,e.transformation),B[12]-=t[0],B[13]-=t[1],B[14]-=t[2],n=B;else{if(t)throw new Error("not implemented");e.transformation&&(n=e.transformation)}let i=null;n&&(Le(re,B),Ge(re,re),i=re);let o=e.attributes,a=r.elementCount(o),d=r.vertexBufferLayout.stride/4;a>Math.floor(Bt/d)&&console.warn("geometry with very large number of elements encountered");let c=r.vertexBufferLayout.createBuffer(a);return r.write(n,i,o,e.objectAndLayerIdColor,c,0),{data:c.buffer,elementCount:a}}},B=A(),re=A(),Bt=16777216/4;var ne=class{constructor(e){this._context=e,this._commands=[],this._transferables=new Set}createMaterial(e){let t=this._context,r=t.generateId("material");switch(e){case"default":{let n=new ct({},{spherical:this._context.globalViewingMode,doublePrecisionRequiresObfuscation:!0}),i=new Q(n);t.registerRenderGeometryBufferWriter(r,i)}break;case"hud":{let n=lt(null,this._context.globalViewingMode)[0],i=new Q(n);t.registerRenderGeometryBufferWriter(r,i)}}return this._commands.push({id:"create-material",type:e,materialId:r}),r}createDirectRenderer(e){let t=this._context.generateId("material-renderer");return this._commands.push({id:"create-direct-renderer",materialRendererId:t,materialId:e}),t}addDirectRendererGeometry(e,t,r){let n=t.materialId,i=this._context.getRenderGeometryBufferWriter(n);if(i==null)throw new Error(`no bufferwriter found for material ${n}`);let o=i.createBuffer(t,r);this._transferables.add(o.data),this._commands.push({id:"add-direct-renderer-geometry",renderGeometryId:e,materialId:n,renderGeometryBuffer:o,localOrigin:r})}removeDirectRendererGeometry(e){this._commands.push({id:"remove-direct-renderer-geometry",renderGeometryId:e})}createLodRenderer(e){let t=this._context.generateId("lod-renderer"),r={levels:e.levels.map(n=>({components:n.components.map(i=>{let o=i.attributes.get(p.POSITION);if(!o||o.indices.length===0)throw new Error("positions attribute expected");let a=3,d=Ke(o.indices.length/a),c=new ut(d,a,o),l=this._context.getRenderGeometryBufferWriter(i.materialId);if(l==null)throw new Error("writer not found");let u=l.createBuffer(i,null);return this._transferables.add(u.data),{materialId:i.materialId,renderGeometryBuffer:u,boundingInfo:{bbMax:c.bbMax,bbMin:c.bbMin}}}),minScreenSpaceRadius:n.minScreenSpaceRadius}))};return this._commands.push({id:"create-lod-renderer",lodRendererId:t,lodRenderGeometry:r}),t}addLodInstances(e,t){this._commands.push({id:"add-lod-instances",lodRendererId:e,data:t}),this._transferables.add(t.featureIds.buffer),this._transferables.add(t.globalTransforms.buffer),this._transferables.add(t.localTransforms.buffer)}removeLodInstances(e,t){this._commands.push({id:"remove-lod-instances",lodRendererId:e,featureIds:t}),this._transferables.add(t.buffer)}append(e){if(e._context!==this._context)throw new Error("Cannot append encoders from different contexts");let{_commands:t,_transferables:r}=this;for(let n of e._commands)t.push(n);for(let n of e._transferables)r.add(n)}async dispatch(){let e=this._commands,t=Array.from(this._transferables);this._clearCommandBuffer(),await this._context.dispatchRenderCommands(e,t)}_clearCommandBuffer(){this._commands=[],this._transferables.clear()}};var se=class{constructor(e){this._idCounter=0,this._bufferWriters=new Map,this._dispatchRenderCommandsCallback=async()=>{},this.globalViewingMode=!1,this.globalViewingMode=e.viewingMode===at.Global,this._dispatchRenderCommandsCallback=e.dispatchRenderCommandsCallback}generateId(e=""){return`${e}${this._idCounter++}`}createEncoder(){return new ne(this)}async dispatchRenderCommands(e,t){e.length!==0&&await this._dispatchRenderCommandsCallback(e,t)}registerRenderGeometryBufferWriter(e,t){this._bufferWriters.set(e,t)}getRenderGeometryBufferWriter(e){return this._bufferWriters.get(e)}};var E=class{constructor(e,t){this._renderCommands=e,this._pipelineStateCommands=t}append(e){this.appendRenderCommands(e._renderCommands),this.appendPipelineStateCommands(e._pipelineStateCommands)}appendRenderCommands(e){this._renderCommands.append(e)}appendPipelineStateCommand(e){this._pipelineStateCommands.push(e)}appendPipelineStateCommands(e){let{_pipelineStateCommands:t}=this;for(let r of e)t.push(r)}execute(){for(let e of this._pipelineStateCommands)e();this._renderCommands.dispatch()}};function k(s,e){let{featureCount:t}=s;if(t===0)return new Uint32Array;let r=new Uint32Array(t);return s.readObjectIds(r),r}function be(s,e){let{featureCount:t}=s;if(t===0)return new Float64Array;let r=new Float64Array(3*t);return s.readCoordinates(r),r}function _t(s,e){let{featureCount:t}=s;if(t===0)return new Float64Array;let r=be(s),n=e.viewSpatialReference,i=e.renderSpatialReference,o=new Float64Array(3*t);if(!qe(r,n,0,o,i,0,t))throw new Error("Failed to project coordinates");return o}function yt(s,e){let t=e.viewSpatialReference,r=e.renderSpatialReference,{extent:n}=s,i=Be(n),o=T();return dt([i[0],i[1],0],t,o,r),o}function ie(s){let e=new Map;for(let[t,r]of s)e.set(t,z(W({},r),{indices:Ze(r.indices)}));return e}function bt(s,e){let t=(r,n,i=!1)=>({levels:r.map(o=>{let a=ie(n(o.tesselation));return i&&Et(a),{components:[{attributes:a,objectAndLayerIdColor:void 0,transformation:null,materialId:e}],minScreenSpaceRadius:o.minScreenSpaceRadius}})});switch(s){case"cone":return t(Pt,r=>ft(1,.5,r,!1),!0);case"sphere":case"cube":case"inverted-cone":case"cylinder":case"tetrahedron":case"diamond":throw new Error("not implemented");default:return}}function Et(s){let e=s,t=e.get(p.POSITION).data,r=e.get(p.NORMAL).data;if(r){let n=xt(s,p.NORMAL).data;for(let i=0;i<r.length;i+=3){let o=r[i+1];n[i+1]=-r[i+2],n[i+2]=o}}if(t){let n=xt(s,p.POSITION).data;for(let i=0;i<t.length;i+=3){let o=t[i+1];n[i+1]=-t[i+2],n[i+2]=o}}}function xt(s,e){let t=s.get(e);return t&&!t.exclusive&&(t=z(W({},t),{exclusive:!0,data:ht(t.data)}),s.set(e,t)),t}var Pt=[{tesselation:6,minScreenSpaceRadius:0},{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}];var ae=class{constructor(e){this._context=e,this.lodRendererId=null,this._loaded=!1,this._loadingPromise=null,this._primitive="cone"}get loaded(){return this._loaded}load(){return this._loadingPromise==null&&(this._loadingPromise=this._load()),this._loadingPromise}async _load(){let e=this._context.renderCommandContext.createEncoder(),t=e.createMaterial("default"),r=bt(this._primitive,t);this.lodRendererId=e.createLodRenderer(r),await e.dispatch(),this._loaded=!0}async createAddCommand(e){let t=this._context.renderCommandContext.createEncoder();if(this.lodRendererId==null)throw new Error("expected lod renderer id to not be null");let{featureCount:r}=e;if(r===0)return t;let n=!0,i=Ne(ot(this._primitive)),o=ge(ke(i)),a=ge(it(o,{isPrimitive:n,width:100,depth:null,height:null})),d=new Float64Array(16*r),c=new Float64Array(16*r),l=be(e,this._context);for(let m=0;m<r;++m){let f=m,_=l[3*m+0],b=l[3*m+1],w=l[3*m+2],O=this._computeGlobalTransform(_,b,w,this._context.viewSpatialReference,Gt),I=this._computeLocalTransform(a,o,jt);this._writeMatrixToTypedBuffer(d,f,I),this._writeMatrixToTypedBuffer(c,f,O)}let u=k(e,this._context),h={featureIds:new Uint32Array(u),localTransforms:d,globalTransforms:c};return t.addLodInstances(this.lodRendererId,h),t}async createRemoveCommand(e){let t=this._context.renderCommandContext.createEncoder();if(this.lodRendererId==null)return t;let r=k(e,this._context);return t.removeLodInstances(this.lodRendererId,r),t}_writeMatrixToTypedBuffer(e,t,r){let n=16*t;for(let i=0;i<16;i++)e[n++]=r[i]}_computeGlobalTransform(e,t,r,n,i){return oe[0]=e,oe[1]=t,oe[2]=r,et(n,oe,i,this._context.renderSpatialReference),i}_computeLocalTransform(e,t,r){return je(r),this._applyObjectScale(e,t,r),r}_applyObjectScale(e,t,r){let n=mt(e,e,t,this._context.renderCoordsHelper.unitInMeters);n[0]===1&&n[1]===1&&n[2]===1||De(r,r,n)}},oe=T(),jt=A(),Gt=A();var de=class{constructor(e){this._context=e,this.materialId=null,this._loaded=!1,this._loadingPromise=null}get loaded(){return this._loaded}load(){return this._loadingPromise==null&&(this._loadingPromise=this._load()),this._loadingPromise}async _load(){let e=this._context.renderCommandContext.createEncoder();this.materialId=e.createMaterial("hud"),e.createDirectRenderer(this.materialId),await e.dispatch(),this._loaded=!0}async createAddCommand(e){let t=this._context.renderCommandContext.createEncoder();if(this.materialId==null)throw new Error("expected material not to be null");let{featureCount:r,id:n}=e;if(r===0)return t;let i=_t(e,this._context),o=yt(e,this._context),a=new Float64Array([0,0,1]),d=new Float64Array([255,255,255,255]),c=new Float64Array([24,24]),l=new Float64Array([0,0,0,1]),u=new Float64Array([0,0]),h=new Float64Array([0]),m=new Uint32Array(r);for(let C=0;C<r;++C)m[C]=C;let f=new Uint32Array(r);for(let C=0;C<r;++C)f[C]=0;let _=new S(i,m,3,!0),b=new S(a,f,3,!0),w=new S(u,f,2,!0),O=new S(d,f,4,!0),I=new S(h,f,1,!0),ue=new S(c,f,2,!0),It=new S(l,f,4,!0),Ct=[[p.POSITION,_],[p.NORMAL,b],[p.UV0,w],[p.COLOR,O],[p.ROTATION,I],[p.SIZE,ue],[p.CENTEROFFSETANDDISTANCE,It]],vt={attributes:ie(Ct),objectAndLayerIdColor:void 0,transformation:A(),materialId:this.materialId};return t.addDirectRendererGeometry(n,vt,o),t}async createRemoveCommand(e){let t=this._context.renderCommandContext.createEncoder();return t.removeDirectRendererGeometry(e.id),t}};var ce=class{constructor(e){this._symbols=new Array,this._featureDataPartitioning=new Map,this._context=e}async load(){this._symbols[0]=new de(this._context),this._symbols[1]=new ae(this._context)}async createAddCommand(e){let t=this._partition(e),r=await Promise.all(t.map(async({index:i,features:o})=>await(await this._provisionSymbol(i))?.createAddCommand(o))),n=this._context.renderCommandContext.createEncoder();for(let i of r)i!=null&&n.append(i);return new E(n,[()=>{this._featureDataPartitioning.set(e,t)}])}async createRemoveCommand(e){let{_featureDataPartitioning:t}=this,r=t.get(e),n=this._context.renderCommandContext.createEncoder();if(r==null)return new E(this._context.renderCommandContext.createEncoder(),[]);let i=await Promise.all(r.map(async({index:o,features:a})=>await this._getLoadedSymbol(o)?.createRemoveCommand(a)));for(let o of i)o!=null&&n.append(o);return new E(n,[()=>{t.delete(e)}])}async _provisionSymbol(e){if(e==null)return null;let t=this._symbols[e];return t?(t.loaded||await t.load(),t):null}_getLoadedSymbol(e){if(e==null)return null;let t=this._symbols[e];return t!=null&&t.loaded?t:null}_partition(e){let t=k(e,this._context);if(t==null)throw new Error("unable to fetch objectIds");let{featureCount:r}=e,n=[[],[]];for(let i=0;i<r;++i)n[t[i]%2].push(i);return n.map((i,o)=>new we(o,e.subset(new Uint32Array(i)))).filter(i=>i.features.featureCount>0)}},we=class{constructor(e,t){this.index=e,this.features=t}};var le=class extends V.EventedAccessor{constructor(){super(...arguments),this.remoteClient=null,this._featureDataStore=new J,this._featureStore=new X,this._tileManager=null,this._renderer=null,this._fetcher=null,this._queryEngine=null,this._defaultQueryJSON=null}get updating(){return this._tileManager.updating}destroy(){this._featureStore.clear(),this._tileManager?.destroy()}async setup({viewSpatialReference:s,renderSpatialReference:e,viewingMode:t,baseQuery:r,url:n,objectIdField:i,capabilities:o,fieldsIndex:a,timeInfo:d,fullExtent:c}){let l=pe.fromJSON(s),u=pe.fromJSON(e);this._fetcher=new te(l,_e.fromJSON(r),n,i,o),this._queryEngine=new Xe({hasZ:!0,hasM:!1,geometryType:"esriGeometryPoint",objectIdField:i,fieldsIndex:a,availableFields:[i],spatialReference:s,featureStore:this._featureStore,timeInfo:d}),this._renderer=new ce({viewSpatialReference:l,renderSpatialReference:u,renderCoordsHelper:pt.create(t,u),renderCommandContext:new se({viewingMode:t,dispatchRenderCommandsCallback:(m,f)=>this.remoteClient.invoke("dispatchRenderCommands",m,{transferList:f})})}),this._defaultQueryJSON=new _e({outSpatialReference:l}).toJSON();let h=null;if(c!=null){let m=Me.fromJSON(c);await Je(m.spatialReference,l),h=$e(m,l)}return this._tileManager=new y({loadTile:(m,f)=>this._fetcher.fetch(m,f),createAddTileCommand:(m,f)=>this._createAddTileCommand(m,f),createRemoveTileCommand:m=>this._createRemoveTileCommand(m),extent:h}),this.addHandles(Se(()=>this.updating,m=>{this.emit("notify-updating",{updating:m})}),Re),await this._renderer.load(),wt}async executeQuery(s,e){return{result:await this._queryEngine.executeQuery(this._ensureQuery(s),e)}}async executeQueryForIds(s,e){let t=await this._queryEngine.executeQueryForIdSet(this._ensureQuery(s),e);return{result:Array.from(t)}}async executeQueryForCount(s,e){return{result:await this._queryEngine.executeQueryForCount(this._ensureQuery(s),e)}}async executeQueryForExtent(s,e){return{result:await this._queryEngine.executeQueryForExtent(this._ensureQuery(s),e)}}async executeQueryForLatestObservations(s,e){return{result:await this._queryEngine.executeQueryForLatestObservations(this._ensureQuery(s),e)}}async onTileTreeChange(s){return await this._tileManager.onTileTreeChange(s),wt}async _createAddTileCommand(s,e){let t=new $(s),r=await this._renderer.createAddCommand(t);return P(e),r.appendPipelineStateCommand(()=>{this._featureDataStore.add(t),this._featureStore.addTile(s)}),r}async _createRemoveTileCommand(s){let e=this._featureStore,t=this._featureDataStore,r=this._renderer,n=t.get(s);if(n==null)return null;let i=await r.createRemoveCommand(n);return i.appendPipelineStateCommand(()=>{t.remove(s),e.removeTile(s)}),i}_ensureQuery(s){return s??this._defaultQueryJSON}};g([x()],le.prototype,"updating",null),le=g([H("esri.views.3d.layers.graphics.pipeline.Feature3DPipelineWorker")],le);var Wn=le,wt={result:void 0};export{Wn as default};
