import{a as j}from"./chunk-WPZN772I.js";import{a as y}from"./chunk-G7BT6VC5.js";import"./chunk-3REMXE4W.js";import"./chunk-4ABKPPKG.js";import"./chunk-PMVQ5DJK.js";import"./chunk-I4Q2S2XA.js";import"./chunk-V774RJYN.js";import"./chunk-L2WNUKLP.js";import"./chunk-XITT4JU2.js";import"./chunk-ZBX6HJOS.js";import"./chunk-BSMAMABT.js";import"./chunk-LYNAYPL3.js";import"./chunk-ULANM5YP.js";import"./chunk-KAMRW6HF.js";import{a as h}from"./chunk-DDZ3KR2Q.js";import"./chunk-4N5OXIEM.js";import"./chunk-W26XKMAT.js";import"./chunk-NQWYPF77.js";import{b as l}from"./chunk-44S2QQS2.js";import"./chunk-JTDXB5TK.js";import"./chunk-CWUY5SXW.js";import"./chunk-KD27XIJC.js";import"./chunk-HP4LYRR4.js";import"./chunk-AFC2H4Q3.js";import"./chunk-OLOKUDVI.js";import"./chunk-4G7UTTZJ.js";import"./chunk-RJWOVI3M.js";import"./chunk-NRBJLISB.js";import"./chunk-BOVYXYHK.js";import"./chunk-FENRIY2T.js";import"./chunk-HX2VGIR2.js";import"./chunk-64QN2VGD.js";import"./chunk-JGEVVXD4.js";import"./chunk-B3FO6PT7.js";import"./chunk-C4UMJHQC.js";import"./chunk-BCREO4Q5.js";import"./chunk-LXFQWIWE.js";import"./chunk-QT6UNBJP.js";import"./chunk-MWSXMSWY.js";import"./chunk-JRCKELO6.js";import"./chunk-KJULKTB5.js";import"./chunk-LACL4BQ2.js";import"./chunk-YR2HD3ZC.js";import"./chunk-GJASVPF6.js";import"./chunk-UBFCO3DV.js";import"./chunk-XZIOXVVJ.js";import"./chunk-EXJYW3PC.js";import"./chunk-SXQPBCOX.js";import"./chunk-LFH24RLM.js";import"./chunk-Z5Q7KLA4.js";import"./chunk-X4LNX4BR.js";import"./chunk-4XZ6X7MQ.js";import"./chunk-WLHY3MMA.js";import{o as R}from"./chunk-KGVXGH6H.js";import"./chunk-ARRCN5K3.js";import"./chunk-LXQPIAN7.js";import"./chunk-FTDD7QBB.js";import"./chunk-DB3UIQCU.js";import"./chunk-SBHKMV3P.js";import"./chunk-R4A63S45.js";import{E as p}from"./chunk-ETE32IYO.js";import"./chunk-ONUGDWDK.js";import"./chunk-SG7CQU4O.js";import"./chunk-QHVIRF5H.js";import"./chunk-WZDN6K3C.js";import"./chunk-QGVBCWUY.js";import"./chunk-OJQ73TPF.js";import"./chunk-354SCPDU.js";import"./chunk-OVHPPCBL.js";import"./chunk-IYZFKXJ6.js";import"./chunk-CKJ56T2Q.js";import"./chunk-SNFOAZZQ.js";import"./chunk-F6JAWRPN.js";import"./chunk-UHRSAPGQ.js";import"./chunk-V76GWARL.js";import{a as s,b as d}from"./chunk-N2WTMF3X.js";function x(r,t){let e=r.toJSON();return e.objectIds&&(e.objectIds=e.objectIds.join(",")),e.orderByFields&&(e.orderByFields=e.orderByFields.join(",")),e.outFields&&!t?.returnCountOnly?e.outFields.includes("*")?e.outFields="*":e.outFields=e.outFields.join(","):delete e.outFields,e.outSR&&(e.outSR=R(e.outSR)),e.dynamicDataSource&&(e.layer=JSON.stringify({source:e.dynamicDataSource}),delete e.dynamicDataSource),e}async function F(r,t,e){let a=await b(r,t,e),o=a.data,u=o.geometryType,n=o.spatialReference,c={};for(let i of o.relatedRecordGroups){let f={fields:void 0,objectIdFieldName:void 0,geometryType:u,spatialReference:n,hasZ:!!o.hasZ,hasM:!!o.hasM,features:i.relatedRecords};if(i.objectId!=null)c[i.objectId]=f;else for(let m of Object.keys(i))m!=="relatedRecords"&&(c[i[m]]=f)}return d(s({},a),{data:c})}async function S(r,t,e){let a=await b(r,t,e,{returnCountOnly:!0}),o=a.data,u={};for(let n of o.relatedRecordGroups)n.objectId!=null&&(u[n.objectId]=n.count);return d(s({},a),{data:u})}async function b(r,t,e={},a){let o=h(s(s(d(s({},r.query),{f:"json"}),a),x(t,a)));return p(r.path+"/queryRelatedRecords",d(s({},e),{query:s(s({},e.query),o)}))}async function D(r,t,e){t=y.from(t);let a=l(r);return F(a,t,e).then(o=>{let u=o.data,n={};return Object.keys(u).forEach(c=>n[c]=j.fromJSON(u[c])),n})}async function J(r,t,e){t=y.from(t);let a=l(r);return S(a,t,s({},e)).then(o=>o.data)}export{D as executeRelationshipQuery,J as executeRelationshipQueryForCount};
