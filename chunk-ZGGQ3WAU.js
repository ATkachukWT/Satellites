import{E as t}from"./chunk-ETE32IYO.js";import{t as x}from"./chunk-UHRSAPGQ.js";import{a as n,b as r}from"./chunk-N2WTMF3X.js";async function h(a,s,e,d,i,l,p){let c=null;if(e!=null){let o=`${a}/nodepages/`,f=o+Math.floor(e.rootIndex/e.nodesPerPage);try{return{type:"page",rootPage:(await t(f,{query:r(n({f:"json"},d),{token:i}),responseType:"json",signal:p})).data,rootIndex:e.rootIndex,pageSize:e.nodesPerPage,lodMetric:e.lodSelectionMetricType,urlPrefix:o}}catch(y){l?.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",f,y),c=y}}if(!s)return null;let m=s?.split("/").pop(),g=`${a}/nodes/`,u=g+m;try{return{type:"node",rootNode:(await t(u,{query:r(n({f:"json"},d),{token:i}),responseType:"json",signal:p})).data,urlPrefix:g}}catch(o){throw new x("sceneservice:root-node-missing","Root node missing.",{pageError:c,nodeError:o,url:u})}}export{h as a};
