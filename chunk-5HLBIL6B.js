import{a as y}from"./chunk-GQVERT3D.js";import{a as h}from"./chunk-DDZ3KR2Q.js";import{E as p,g as f}from"./chunk-ETE32IYO.js";import{l as u}from"./chunk-ONUGDWDK.js";import"./chunk-SG7CQU4O.js";import"./chunk-QHVIRF5H.js";import"./chunk-WZDN6K3C.js";import"./chunk-QGVBCWUY.js";import"./chunk-OJQ73TPF.js";import"./chunk-354SCPDU.js";import"./chunk-OVHPPCBL.js";import"./chunk-IYZFKXJ6.js";import"./chunk-CKJ56T2Q.js";import"./chunk-SNFOAZZQ.js";import"./chunk-F6JAWRPN.js";import"./chunk-UHRSAPGQ.js";import"./chunk-V76GWARL.js";import{a as s,b as i}from"./chunk-N2WTMF3X.js";function j(r){let t=r.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t.orderByFields&&(t.orderByFields=t.orderByFields.join(",")),t}function P(r,t){let e={};for(let a of t){let{parentObjectId:o,parentGlobalId:n,attachmentInfos:m}=a;for(let c of m){let{id:l}=c,I=u(f(`${r.path}/${o}/attachments/${l}`)),d=y.fromJSON(c);d.set({url:I,parentObjectId:o,parentGlobalId:n}),e[o]?e[o].push(d):e[o]=[d]}}return e}function T(r,t,e){let a={query:h(s(i(s({},r.query),{f:"json"}),j(t)))};return e&&(a=i(s(s({},e),a),{query:s(s({},e.query),a.query)})),p(r.path+"/queryAttachments",a).then(o=>o.data.attachmentGroups)}async function g(r,t,e){let{objectIds:a}=t,o=[];for(let n of a)o.push(p(r.path+"/"+n+"/attachments",e));return Promise.all(o).then(n=>a.map((m,c)=>({parentObjectId:m,attachmentInfos:n[c].data.attachmentInfos})))}export{T as executeAttachmentQuery,g as fetchAttachments,P as processAttachmentQueryResult};
