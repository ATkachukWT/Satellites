import{a as f}from"./chunk-2U44WK2Y.js";import{a as m}from"./chunk-JUMM5VTE.js";import"./chunk-GPDZGV7G.js";import"./chunk-BPX3YT3K.js";import"./chunk-KBDKZSTB.js";import"./chunk-PMVQ5DJK.js";import"./chunk-DVBZA6ZU.js";import{a as c,j as V}from"./chunk-MWSXMSWY.js";import{f as p}from"./chunk-JRCKELO6.js";import"./chunk-YR2HD3ZC.js";import"./chunk-GJASVPF6.js";import"./chunk-XZIOXVVJ.js";import"./chunk-X4LNX4BR.js";import"./chunk-WLHY3MMA.js";import"./chunk-KGVXGH6H.js";import"./chunk-ARRCN5K3.js";import"./chunk-LXQPIAN7.js";import"./chunk-SBHKMV3P.js";import"./chunk-R4A63S45.js";import"./chunk-ETE32IYO.js";import"./chunk-ONUGDWDK.js";import"./chunk-SG7CQU4O.js";import{H as t}from"./chunk-QHVIRF5H.js";import{I as d}from"./chunk-WZDN6K3C.js";import{a as e}from"./chunk-QGVBCWUY.js";import"./chunk-OJQ73TPF.js";import"./chunk-354SCPDU.js";import"./chunk-OVHPPCBL.js";import"./chunk-IYZFKXJ6.js";import{b as y,e as w,x as h}from"./chunk-CKJ56T2Q.js";import"./chunk-SNFOAZZQ.js";import"./chunk-F6JAWRPN.js";import{t as l}from"./chunk-UHRSAPGQ.js";import"./chunk-V76GWARL.js";import"./chunk-N2WTMF3X.js";var u="analysis-view-handles",i=class extends f(m){constructor(s){super(s),this.type="line-of-sight-3d",this._analysisModule=null}initialize(){this.addHandles(c(()=>this.layer.analysis,s=>{this._destroyAnalysisView(),s!=null&&this._createAnalysisView(s)},V),u)}destroy(){this.removeHandles(u),this._destroyAnalysisView()}async whenAnalysisView(){if(this.analysisView!=null)return this.analysisView;if(this._createAnalysisViewTask!=null)return this._createAnalysisViewTask.promise;throw new l("layerview:no-analysisview-for-analysis","The analysis has not been set on the LineOfSightLayer of this layer view")}isUpdating(){return this._createAnalysisViewTask!=null||this.analysisView!=null&&this.analysisView.updating}_createAnalysisView(s){let n=p(async a=>(this.analysisView=await this._createAnalysisViewPromise(s,a),this._createAnalysisViewTask===n&&(this._createAnalysisViewTask=null),this.analysisView));this._createAnalysisViewTask=n}_destroyAnalysisView(){this.analysisView=y(this.analysisView),this._createAnalysisViewTask=w(this._createAnalysisViewTask)}async _createAnalysisViewPromise(s,n){let a=this._analysisModule;if(a==null){let o=await this._loadAnalysisModule();this._analysisModule=o,a=o}let r=new a.default({analysis:s,view:this.view,parent:this});if(await r.when(),h(n))throw r.destroy(),new l("layerview:no-analysisview-for-analysis","The analysis has not been added to the LineOfSightLayer of this layer view",{analysis:s});return r}_loadAnalysisModule(){return import("./chunk-DTKKCWET.js")}};e([t()],i.prototype,"type",void 0),e([t()],i.prototype,"layer",void 0),e([t()],i.prototype,"analysisView",void 0),e([t()],i.prototype,"_createAnalysisViewTask",void 0),i=e([d("esri.views.3d.layers.LineOfSightLayerView3D")],i);var S=i;export{S as default};
