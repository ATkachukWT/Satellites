import{E as f}from"./chunk-ETE32IYO.js";import{D as y,d as w}from"./chunk-ONUGDWDK.js";import{D as d}from"./chunk-CKJ56T2Q.js";import{t as p}from"./chunk-UHRSAPGQ.js";import{a as m,b as u}from"./chunk-N2WTMF3X.js";var n=null,s=!0;function A(e,a,t){if(!e||!a)throw new Error("Cannot construct image data without dimensions");if(s)try{return new ImageData(e,a)}catch{s=!1}return g(e,a,t)}function E(e,a,t,r){if(!a||!t)throw new Error("Cannot construct image data without dimensions");if(s)try{return new ImageData(e,a,t)}catch{s=!1}let i=g(a,t,r);return i.data.set(e,0),i}function h(){return n||(n=document.createElement("canvas"),n.width=1,n.height=1),n}function g(e,a,t){return t||(t=h()),t.getContext("2d").createImageData(e,a)}async function l(e,a){let t=window.URL.createObjectURL(e);try{let{data:r}=await f(t,u(m({},a),{responseType:"image"}));return r}catch(r){throw d(r)?r:new p("invalid-image",`Could not fetch requested image at ${t}`)}finally{window.URL.revokeObjectURL(t)}}async function L(e,a){let{arrayBuffer:t,mediaType:r}=await T(e,a),i=r==="image/png";if(r==="image/gif"){let{isAnimatedGIF:o,parseGif:c}=await import("./chunk-IHLLA4JP.js");if(o(t))return c(t,a)}if(i){let{isAnimatedPNG:o,parseApng:c}=await import("./chunk-ABS3E5OX.js");if(o(t))return c(t,a)}return l(new Blob([t],{type:r}),a)}async function T(e,a){let t=y(e);if(t?.isBase64)return{arrayBuffer:w(t.data),mediaType:t.mediaType};let r=await f(e,m({responseType:"array-buffer"},a));return{arrayBuffer:r.data,mediaType:r.getHeader?.("Content-Type")??""}}export{A as a,E as b,L as c};
