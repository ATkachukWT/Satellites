import{a as h,b as f}from"./chunk-QLZDPV4K.js";import"./chunk-JYUV3HWY.js";import"./chunk-R7MBZ4JV.js";import"./chunk-DSVUPQIZ.js";import{a as _}from"./chunk-NSWLMJDI.js";import"./chunk-KLXERNY4.js";import"./chunk-XY4QPRKP.js";import"./chunk-UV6SBQOQ.js";import"./chunk-OWV7FEAY.js";import{c as S}from"./chunk-2XYAAYOE.js";import"./chunk-WIFM6OT5.js";import"./chunk-GI4NW5SA.js";import"./chunk-SU7IJ65K.js";import"./chunk-YSD7LK2L.js";import"./chunk-CAXK5KYB.js";import"./chunk-3CCK7BDD.js";import"./chunk-LNYBTIG7.js";import"./chunk-RZU6EEB3.js";import{a as j}from"./chunk-7E723FQO.js";import"./chunk-SVJ5AK5B.js";import"./chunk-FXCL7YYQ.js";import{a as w}from"./chunk-CUJB6F5L.js";import{a as z}from"./chunk-5NHJFBCW.js";import"./chunk-VMECOA4F.js";import"./chunk-JPMGMA4B.js";import"./chunk-PMVQ5DJK.js";import{a as d,b}from"./chunk-L2WNUKLP.js";import"./chunk-ZBX6HJOS.js";import"./chunk-DJW5LMRG.js";import"./chunk-ALWV3RJ2.js";import"./chunk-DEH76MSI.js";import"./chunk-LAVV77UH.js";import"./chunk-VTGWQ7AP.js";import"./chunk-USMAJP2P.js";import"./chunk-PHNFWHVF.js";import"./chunk-JTDXB5TK.js";import{e as O,i as E,l as L}from"./chunk-KD27XIJC.js";import{j as R}from"./chunk-TPFJWNIU.js";import"./chunk-P25RU3X5.js";import"./chunk-XRRQM4E2.js";import"./chunk-GWBRHLNH.js";import"./chunk-EM35R6FY.js";import"./chunk-6B5XFA6F.js";import"./chunk-NHEQ4TAR.js";import"./chunk-HP4LYRR4.js";import"./chunk-AFC2H4Q3.js";import"./chunk-4G7UTTZJ.js";import"./chunk-ZTOZWLEE.js";import"./chunk-PTZYZULI.js";import"./chunk-NMLYCCKN.js";import"./chunk-RSDQHAJX.js";import"./chunk-BOVYXYHK.js";import"./chunk-HX2VGIR2.js";import"./chunk-64QN2VGD.js";import"./chunk-JGEVVXD4.js";import"./chunk-B3FO6PT7.js";import"./chunk-C4UMJHQC.js";import"./chunk-BCREO4Q5.js";import"./chunk-LXFQWIWE.js";import"./chunk-QT6UNBJP.js";import"./chunk-SLAWDKDA.js";import{a as u,j as m}from"./chunk-MWSXMSWY.js";import"./chunk-JRCKELO6.js";import"./chunk-KJULKTB5.js";import"./chunk-LACL4BQ2.js";import{c as l}from"./chunk-YR2HD3ZC.js";import"./chunk-GJASVPF6.js";import"./chunk-UBFCO3DV.js";import"./chunk-XZIOXVVJ.js";import"./chunk-SXQPBCOX.js";import"./chunk-LFH24RLM.js";import"./chunk-Z5Q7KLA4.js";import"./chunk-X4LNX4BR.js";import"./chunk-4XZ6X7MQ.js";import"./chunk-WLHY3MMA.js";import"./chunk-KGVXGH6H.js";import"./chunk-ARRCN5K3.js";import"./chunk-LXQPIAN7.js";import"./chunk-FTDD7QBB.js";import"./chunk-DB3UIQCU.js";import"./chunk-SBHKMV3P.js";import"./chunk-R4A63S45.js";import"./chunk-ETE32IYO.js";import"./chunk-ONUGDWDK.js";import"./chunk-SG7CQU4O.js";import{H as r}from"./chunk-QHVIRF5H.js";import{I as y}from"./chunk-WZDN6K3C.js";import{a as e}from"./chunk-QGVBCWUY.js";import"./chunk-OJQ73TPF.js";import"./chunk-354SCPDU.js";import"./chunk-OVHPPCBL.js";import"./chunk-IYZFKXJ6.js";import"./chunk-CKJ56T2Q.js";import"./chunk-SNFOAZZQ.js";import"./chunk-F6JAWRPN.js";import"./chunk-UHRSAPGQ.js";import"./chunk-V76GWARL.js";import"./chunk-N2WTMF3X.js";var v=l.ofType(f),o=class extends _{constructor(t){super(t),this.type="line-of-sight",this.observer=null,this.extent=null}initialize(){this.addHandles(u(()=>this._computeExtent(),t=>{t?.pending==null&&this._set("extent",t!=null?t.extent:null)},m))}get targets(){return this._get("targets")||new v}set targets(t){this._set("targets",d(t,this.targets,v))}get spatialReference(){return this.observer?.position!=null?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[this.observer?.position]}async waitComputeExtent(){let t=this._computeExtent();return t!=null?t.pending:Promise.resolve()}_computeExtent(){let t=this.spatialReference;if(this.observer?.position==null||t==null)return null;let s=a=>S(a.position,a.elevationInfo)==="absolute-height",n=this.observer.position,x=O(n.x,n.y,n.z,n.x,n.y,n.z);for(let a of this.targets)if(a.position!=null){let p=R(a.position,t);if(p.pending!=null)return{pending:p.pending,extent:null};if(p.geometry!=null){let{x:A,y:q,z:M}=p.geometry;L(x,[A,q,M])}}let g=E(x,t);return s(this.observer)&&this.targets.every(s)||(g.zmin=void 0,g.zmax=void 0),{pending:null,extent:g}}clear(){this.observer=null,this.targets.removeAll()}};e([r({type:["line-of-sight"]})],o.prototype,"type",void 0),e([r({type:h,json:{read:!0,write:!0}})],o.prototype,"observer",void 0),e([r({cast:b,type:v,nonNullable:!0,json:{read:!0,write:!0}})],o.prototype,"targets",null),e([r({value:null,readOnly:!0})],o.prototype,"extent",void 0),e([r({readOnly:!0})],o.prototype,"spatialReference",null),e([r({readOnly:!0})],o.prototype,"requiredPropertiesForEditing",null),o=e([y("esri.analysis.LineOfSightAnalysis")],o);var c=o;var P=l.ofType(f),i=class extends j(w(z)){constructor(t){super(t),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new c,this.opacity=1}initialize(){this.addHandles(u(()=>this.analysis,(t,s)=>{s!=null&&s.parent===this&&(s.parent=null),t!=null&&(t.parent=this)},m))}async load(){return this.analysis!=null&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return this.analysis?.observer}set observer(t){let{analysis:s}=this;s&&(s.observer=t)}get targets(){return this.analysis!=null?this.analysis.targets:new l}set targets(t){d(t,this.analysis?.targets)}get fullExtent(){return this.analysis!=null?this.analysis.extent:null}get spatialReference(){return this.analysis!=null?this.analysis.spatialReference:null}releaseAnalysis(t){this.analysis===t&&(this.analysis=new c)}};e([r({json:{read:!1},readOnly:!0})],i.prototype,"type",void 0),e([r({type:["LineOfSightLayer"]})],i.prototype,"operationalLayerType",void 0),e([r({type:h,json:{read:!0,write:{isRequired:!0,ignoreOrigin:!0}}})],i.prototype,"observer",null),e([r({type:P,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],i.prototype,"targets",null),e([r({type:c,nonNullable:!0,json:{read:!1,write:!1}})],i.prototype,"analysis",void 0),e([r({readOnly:!0})],i.prototype,"fullExtent",null),e([r({readOnly:!0})],i.prototype,"spatialReference",null),e([r({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],i.prototype,"opacity",void 0),e([r({type:["show","hide"]})],i.prototype,"listMode",void 0),i=e([y("esri.layers.LineOfSightLayer")],i);var mt=i;export{mt as default};
