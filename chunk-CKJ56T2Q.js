import{r as g,t as w}from"./chunk-UHRSAPGQ.js";import{a as A,b as T}from"./chunk-N2WTMF3X.js";function W(e,r){if(e==null)throw new Error(r??"value is None")}function G(e){return e?.destroy(),null}function R(e){return e?.dispose(),null}function P(e){return e?.remove(),null}function U(e){return e?.abort(),null}function z(e){return e?.release(),null}function B(e,r,t){return e!=null&&r!=null?t!=null?t(e,r):e.equals(r):e===r}function J(e,r){return e?.[r]}function K(e,r){let t;return e.some((n,a)=>(t=r(n,a),t!=null)),t??void 0}var x={remove:()=>{}};function i(e){return e?{remove(){e&&(e(),e=void 0)}}:x}function j(e){e.forEach(r=>r?.remove())}function X(e){j(e),e.length=0}function Y(e){return i(()=>j(e))}function Z(e){return i(()=>e()?.remove())}function _(e){return i(()=>e?.abort())}function ee(e){return i(e!=null?()=>e.destroy():void 0)}function C(e){return{setTimeout:(r,t)=>{let n=e.setTimeout(r,t);return i(()=>e.clearTimeout(n))}}}var L=C(globalThis);function S(e){return I(e)||k(e)}function I(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function k(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function $(e,r,t){if(!S(e))throw new TypeError("target is not a Evented or EventTarget object");return k(e)?q(e,r,t):e.on(r,t)}function q(e,r,t,n){if(Array.isArray(r)){let a=r.slice();for(let o of a)e.addEventListener(o,t,n);return i(()=>{for(let o of a)e.removeEventListener(o,t,n)})}return e.addEventListener(r,t,n),i(()=>e.removeEventListener(r,t,n))}function h(e,r,t){if(!S(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(r,t);let n=$(e,r,a=>{n.remove(),t.call(e,a)});return n}function c(e="Aborted"){return new w("AbortError",e)}function M(e,r="Aborted"){if(D(e))throw c(r)}function m(e){return e instanceof AbortSignal?e:e?.signal??void 0}function D(e){let r=m(e);return r!=null&&r.aborted}function fe(e){if(d(e))throw e}function me(e){if(!d(e))throw e}function f(e,r){let t=m(e);if(t!=null){if(!t.aborted)return h(t,"abort",()=>r());r()}}function de(e,r){let t=m(e);if(t!=null)return M(t),h(t,"abort",()=>r(c()))}function be(e,r){return m(r)==null?e:new Promise((t,n)=>{let a=f(r,()=>n(c())),o=()=>{a=P(a)};e.then(o,o),e.then(t,n)})}function d(e){return e?.name==="AbortError"}async function pe(e){try{return await e}catch(r){if(!d(r))throw r;return}}async function ve(e,r=g.getLogger("esri")){try{return await e}catch(t){d(t)||r.error(t)}}async function F(e){if(!e)return;if(typeof e.forEach!="function"){let t=Object.keys(e),n=t.map(s=>e[s]),a=await F(n),o={};return t.map((s,u)=>o[s]=a[u]),o}let r=e;return Promise.allSettled(r).then(t=>Array.from(r,(n,a)=>{let o=t[a];return o.status==="fulfilled"?{promise:n,value:o.value}:{promise:n,error:o.reason}}))}async function we(e){return(await Promise.allSettled(e)).filter(r=>r.status==="fulfilled").map(r=>r.value)}async function he(e){return(await Promise.allSettled(e)).filter(r=>r.status==="rejected").map(r=>r.reason)}function N(e,r=void 0,t){let n=new AbortController;return f(t,()=>n.abort()),new Promise((a,o)=>{let s=setTimeout(()=>{s=0,a(r)},e);f(n,()=>{s&&(clearTimeout(s),o(c()))})})}function ye(e,r,t,n){let a=t&&"abort"in t?t:null;n!=null||a||(n=t);let o=setTimeout(()=>{o=0,a?.abort()},r),s=()=>n||new w("promiseUtils:timeout","The wrapped promise did not resolve within "+r+" ms");return e.then(u=>{if(o===0)throw s();return clearTimeout(o),u},u=>{throw clearTimeout(o),o===0?s():u})}function Ee(e,r){let t=new AbortController,n=setTimeout(()=>t.abort(),r);return f(e,()=>{t.abort(),clearTimeout(n)}),T(A({},e),{signal:t.signal})}function V(e){return e&&typeof e.then=="function"}function H(e){return V(e)?e:Promise.resolve(e)}function Ae(e,r=-1){let t,n,a,o,s=null,u=(...b)=>{if(t){n=b,o&&o.reject(c()),o=O();let l=o.promise;if(s){let v=s;s=null,v.abort()}return l}if(a=o||O(),o=null,r>0){let l=new AbortController;t=H(e(...b,l.signal));let v=t;N(r).then(()=>{t===v&&(o?l.abort():s=l)})}else t=1,t=H(e(...b));let y=()=>{let l=n;n=a=t=s=null,l!=null&&u(...l)},E=t,p=a;return E.then(y,y),E.then(p.resolve,p.reject),p.promise};return u}function O(){let e,r,t=new Promise((a,o)=>{e=a,r=o}),n=a=>{e(a)};return n.resolve=a=>e(a),n.reject=a=>r(a),n.timeout=(a,o)=>L.setTimeout(()=>n.reject(o),a),n.promise=t,n}function Te(e,r){return e.then(r,r)}async function ge(e){await Promise.resolve(),M(e)}export{W as a,G as b,R as c,P as d,U as e,z as f,B as g,J as h,K as i,i as j,j as k,X as l,Y as m,Z as n,_ as o,ee as p,L as q,S as r,$ as s,h as t,c as u,M as v,m as w,D as x,fe as y,me as z,f as A,de as B,be as C,d as D,pe as E,ve as F,F as G,we as H,he as I,N as J,ye as K,Ee as L,V as M,H as N,Ae as O,O as P,Te as Q,ge as R};
