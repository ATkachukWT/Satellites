import{f as v}from"./chunk-SG7CQU4O.js";import{k as P,r as D,t as E}from"./chunk-UHRSAPGQ.js";import{w as z}from"./chunk-V76GWARL.js";import{a as C}from"./chunk-N2WTMF3X.js";var X=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Y={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function A(e){let n=e?.match(X);if(!n)return null;let[,r,t,s]=n;if(!r)return null;let o=null,a=null,i=null,{devext:u,qaext:c,www:d}=Y;if(t)if(o=r,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:i}=u);break;case"qa":({customBaseUrl:a,portalHostname:i}=c);break;default:return null}else({customBaseUrl:a,portalHostname:i}=d);else switch(r.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:i}=u);break;case"qaext":({customBaseUrl:a,portalHostname:i}=c);break;case"www":({customBaseUrl:a,portalHostname:i}=d);break;default:return null}return{customBaseUrl:a,isPortal:!1,portalHostname:i,urlKey:o}}function ve(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function Ae(e){let n=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,t=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return n.test(e)?e=e.replace(n,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):t.test(e)&&(e=e.replace(t,"https://qaext.arcgis.com")),e}function G(e){let n=atob(e),r=new Uint8Array(n.length);for(let t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r.buffer}function Q(e){let n=new Uint8Array(e),r="";for(let t=0;t<n.length;t++)r+=String.fromCharCode(n[t]);return btoa(r)}var Z=()=>D.getLogger("esri.core.urlUtils"),h=P.request,F="esri/config: esriConfig.request.proxyUrl is not set.",W=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,J=/^\s*http:/i,ee=/^\s*https:/i,ne=/^\s*file:/i,re=/:\d+$/,te=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,se=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),oe=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$"),f=class{constructor(n=""){this.uri=n,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(se);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(oe),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}},w={},ae=new f(P.applicationUrl),l=ae,ie=le(),T=ie,ze=()=>l,De=()=>T;function le(){let e=l.path,n=e.slice(0,e.lastIndexOf("/")+1);return`${`${l.scheme}://${l.host}${l.port!=null?`:${l.port}`:""}`}${n}`}function m(e){if(!e)return null;let n={path:null,query:null},r=new f(e),t=e.indexOf("?");return r.query===null?n.path=e:(n.path=e.slice(0,t),n.query=K(r.query)),r.fragment&&(n.hash=r.fragment,r.query===null&&(n.path=n.path.slice(0,n.path.length-(r.fragment.length+1)))),n}function K(e){let n=e.split("&"),r={};for(let t of n){if(!t)continue;let s=t.indexOf("="),o,a;s<0?(o=decodeURIComponent(t),a=""):(o=decodeURIComponent(t.slice(0,s)),a=decodeURIComponent(t.slice(s+1)));let i=r[o];typeof i=="string"&&(i=r[o]=[i]),Array.isArray(i)?i.push(a):r[o]=a}return r}function I(e,n){return e?n&&typeof n=="function"?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(n(r,e[r]))).join("&"):Object.keys(e).map(r=>{let t=e[r];if(t==null)return"";let s=encodeURIComponent(r)+"=",o=n?.[r];return o?s+encodeURIComponent(o(t)):Array.isArray(t)?t.map(a=>v.isSerializable(a)?s+encodeURIComponent(JSON.stringify(a)):s+encodeURIComponent(a)).join("&"):v.isSerializable(t)?s+encodeURIComponent(JSON.stringify(t)):s+encodeURIComponent(t)}).filter(r=>r).join("&"):""}function ue(e=!1){let n,r=h.proxyUrl;if(typeof e=="string"){n=ye(e);let t=L(e);t&&(r=t.proxyUrl)}else n=!!e;if(!r)throw Z().warn(F),new E("urlUtils:proxy-not-set",F);return n&&S()&&(r=M(r)),m(r)}function Ee(e,n=!1){let r=L(e),t,s;if(r){let o=H(r.proxyUrl);t=o.path,s=o.query?K(o.query):null}else if(n){let o=ue(e);t=o.path,s=o.query}if(t){let o=m(e);e=t+"?"+o.path;let a=I(C(C({},s),o.query));a&&(e=`${e}?${a}`)}return e}var y={path:"",query:""};function H(e){let n=e.indexOf("?");return n!==-1?(y.path=e.slice(0,n),y.query=e.slice(n+1)):(y.path=e,y.query=null),y}function N(e){return e=(e=O(e=be(e=H(e).path),!0)).toLowerCase()}function Ge(e){let n={proxyUrl:e.proxyUrl,urlPrefix:N(e.urlPrefix)},r=h.proxyRules,t=n.urlPrefix,s=r.length;for(let o=0;o<r.length;o++){let a=r[o].urlPrefix;if(t.indexOf(a)===0){if(t.length===a.length)return-1;s=o;break}a.indexOf(t)===0&&(s=o+1)}return r.splice(s,0,n),s}function L(e){let n=h.proxyRules,r=N(e);for(let t=0;t<n.length;t++)if(r.indexOf(n[t].urlPrefix)===0)return n[t]}function Qe(e,n){if(!e||!n)return!1;e=U(e),n=U(n);let r=A(e),t=A(n);return r!=null&&t!=null?r.portalHostname===t.portalHostname:r==null&&t==null&&R(e,n,!0)}function Fe(e,n){return e=U(e),n=U(n),O(e)===O(n)}function U(e){let n=(e=$(e)).indexOf("/sharing");return n>0?e.slice(0,n):e.replace(/\/+$/,"")}function We(e,n=h.interceptors){let r=t=>t==null||t instanceof RegExp&&t.test(e)||typeof t=="string"&&e.startsWith(t);if(n){for(let t of n)if(Array.isArray(t.urls)){if(t.urls.some(r))return t}else if(r(t.urls))return t}return null}function R(e,n,r=!1){if(!e||!n)return!1;let t=B(e),s=B(n);return!(!r&&t.scheme!==s.scheme)&&t.host!=null&&s.host!=null&&t.host.toLowerCase()===s.host.toLowerCase()&&t.port===s.port}function Je(e){if(typeof e=="string"){if(!x(e))return!0;e=B(e)}if(R(e,l))return!0;let n=h.trustedServers||[];for(let r=0;r<n.length;r++){let t=ce(n[r]);for(let s=0;s<t.length;s++)if(R(e,t[s]))return!0}return!1}function ce(e){return w[e]||(k(e)||p(e)?w[e]=[new f(j(e))]:w[e]=[new f(`http://${e}`),new f(`https://${e}`)]),w[e]}function j(e,n=T,r){return p(e)?r?.preserveProtocolRelative?e:l.scheme==="http"&&l.authority===pe(e).slice(2)?`http:${e}`:`https:${e}`:k(e)?e:fe(e[0]==="/"?Ue(n):n,e)}function Ke(e,n=T,r){if(e==null||!x(e))return e;let t=$(e),s=t.toLowerCase(),o=$(n).toLowerCase().replace(/\/+$/,""),a=r?$(r).toLowerCase().replace(/\/+$/,""):null;if(a&&o.indexOf(a)!==0)return e;let i=(g,_,q)=>(q=g.indexOf(_,q))===-1?g.length:q,u=i(s,"/",s.indexOf("//")+2),c=-1;for(;s.slice(0,u+1)===o.slice(0,u)+"/"&&(c=u+1,u!==s.length);)u=i(s,"/",u+1);if(c===-1||a&&c<a.length)return e;e=t.slice(c);let d=o.slice(c-1).replaceAll(/[^/]+/g,"").length;if(d>0)for(let g=0;g<d;g++)e=`../${e}`;else e=`./${e}`;return e}function $(e){return e=Ce(e=qe(e=Oe(e=j(e=e.trim()))))}function fe(...e){let n=e.filter(z);if(!n?.length)return;let r=[];if(x(n[0])){let s=n[0],o=s.indexOf("//");o!==-1&&(r.push(s.slice(0,o+1)),we(n[0])&&(r[0]+="/"),n[0]=s.slice(o+2))}else n[0][0]==="/"&&r.push("");let t=n.reduce((s,o)=>o?s.concat(o.split("/")):s,[]);for(let s=0;s<t.length;s++){let o=t[s];o===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!o&&s===t.length-1||o&&(o!=="."||r.length===0))&&r.push(o)}return r.join("/")}function pe(e,n=!1){if(e==null||he(e)||me(e))return null;let r=e.indexOf("://");if(r===-1&&p(e))r=2;else{if(r===-1)return null;r+=3}let t=e.indexOf("/",r);return t!==-1&&(e=e.slice(0,t)),n&&(e=O(e,!0)),e}function x(e){return p(e)||k(e)}function he(e){return e!=null&&e.slice(0,5)==="blob:"}function me(e){return e!=null&&e.slice(0,5)==="data:"}function de(e){let n=b(e);return n?.isBase64?G(n.data):null}function Ne(e){return Q(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}var ge=/^data:(.*?)(;base64)?,(.*)$/;function b(e){let n=e.match(ge);if(!n)return null;let[,r,t,s]=n;return{mediaType:r,isBase64:!!t,data:s}}function Me(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function Ve(e){return(await fetch(e)).blob()}function _e(e){let n=de(e);if(!n)return null;let r=b(e);return new Blob([n],{type:r.mediaType})}function p(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function k(e){return e!=null&&W.test(e)}function ye(e){return e!=null&&ee.test(e)||l.scheme==="https"&&p(e)}function xe(e){return e!=null&&J.test(e)||l.scheme==="http"&&p(e)}function we(e){return e!=null&&ne.test(e)}function M(e){return p(e)?`https:${e}`:e.replace(J,"https:")}function $e(){return l.scheme==="http"}function S(){return l.scheme==="https"}function O(e,n=!1){return p(e)?e.slice(2):(e=e.replace(W,""),n&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Ue(e){let n=e.indexOf("//"),r=e.indexOf("/",n+2);return r===-1?e:e.slice(0,r)}function Xe(e){let n=0;if(x(e)){let t=e.indexOf("//");t!==-1&&(n=t+2)}let r=e.lastIndexOf("/");return r<n?e:e.slice(0,r+1)}function Ye(e,n){if(!e)return"";let r=m(e).path.replace(/\/+$/,""),t=r.slice(r.lastIndexOf("/")+1);if(!n?.length)return t;let s=new RegExp(`\\.(${n.join("|")})$`,"i");return t.replace(s,"")}function be(e){return e.endsWith("/")?e:`${e}/`}function Ze(e){return e.replace(/\/+$/,"")}function Oe(e){if(/^https?:\/\//i.test(e)){let n=H(e);e=(e=n.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),n.query&&(e+=`?${n.query}`)}return e}function qe(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Ce(e){let n=h.httpsDomains;if(!xe(e))return e;let r=e.indexOf("/",7),t;if(t=r===-1?e:e.slice(0,r),t=t.toLowerCase().slice(7),re.test(t)){if(!t.endsWith(":80"))return e;t=t.slice(0,-3),e=e.replace(":80","")}return $e()&&t===l.authority&&!te.test(e)||(S()&&t===l.authority||n&&n.some(s=>t===s||t.endsWith(`.${s}`))||S()&&!L(e))&&(e=M(e)),e}function en(e,n,r){if(!(n&&r&&e&&x(e)))return e;let t=e.indexOf("//"),s=e.indexOf("/",t+2),o=e.indexOf(":",t+2),a=Math.min(s<0?e.length:s,o<0?e.length:o);return e.slice(t+2,a).toLowerCase()!==n.toLowerCase()?e:`${e.slice(0,t+2)}${r}${e.slice(a)}`}function B(e){return typeof e=="string"?new f(j(e)):(e.scheme||(e.scheme=l.scheme),e)}function nn(e){return Pe.test(e)}function rn(e,n){let r=m(e),t=Object.keys(r.query||{});return t.length>0&&n&&n.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${t.join(", ")}.`),r.path}function tn(e,n,r){let t=m(e),s=t.query||{};return s[n]=String(r),`${t.path}?${I(s)}`}function sn(e,n){if(!n)return e;let r=m(e),t=r.query||{};for(let[o,a]of Object.entries(n))a!=null&&(t[o]=a);let s=I(t);return s?`${r.path}?${s}`:r.path}function on(e){if(e==null)return null;let n=e.match(V);return n?n[2]:null}function an(e){if(e==null)return null;let n=e.match(V);return n?{path:n[1],extension:n[2]}:{path:e,extension:null}}async function ln(e){return typeof e=="string"?b(e)??{data:e}:new Promise((n,r)=>{let t=new FileReader;t.readAsDataURL(e),t.onload=()=>n(b(t.result)),t.onerror=s=>r(s)})}var V=/([^.]*)\.([^/]*)$/,Pe=/(^data:image\/svg|\.svg$)/i;export{A as a,ve as b,Ae as c,G as d,f as e,ze as f,De as g,m as h,K as i,I as j,ue as k,Ee as l,Ge as m,L as n,Qe as o,Fe as p,We as q,R as r,Je as s,j as t,Ke as u,$ as v,fe as w,pe as x,x as y,he as z,me as A,de as B,Ne as C,b as D,Me as E,Ve as F,_e as G,p as H,ye as I,M as J,Xe as K,Ye as L,be as M,Ze as N,en as O,nn as P,rn as Q,tn as R,sn as S,on as T,an as U,ln as V};
