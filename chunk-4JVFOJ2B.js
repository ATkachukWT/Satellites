import{a as o}from"./chunk-QO4VV4M2.js";import{h as p,i as v}from"./chunk-VDP755DS.js";import"./chunk-FQTXYWH5.js";import"./chunk-KLXERNY4.js";import"./chunk-GWZ4F32U.js";import{b as l}from"./chunk-UO5Q6C3A.js";import"./chunk-BNH7YXHY.js";import{a as y,b as u,d as m,g as s}from"./chunk-K27EVVBH.js";import"./chunk-TPFJWNIU.js";import"./chunk-P25RU3X5.js";import"./chunk-XRRQM4E2.js";import"./chunk-GWBRHLNH.js";import"./chunk-BOVYXYHK.js";import"./chunk-JGEVVXD4.js";import"./chunk-B3FO6PT7.js";import"./chunk-C4UMJHQC.js";import"./chunk-BCREO4Q5.js";import"./chunk-LXFQWIWE.js";import"./chunk-QT6UNBJP.js";import"./chunk-SLAWDKDA.js";import"./chunk-XZIOXVVJ.js";import"./chunk-5RAXVJQI.js";import"./chunk-EXJYW3PC.js";import"./chunk-SXQPBCOX.js";import"./chunk-LFH24RLM.js";import"./chunk-Z5Q7KLA4.js";import"./chunk-X4LNX4BR.js";import"./chunk-4XZ6X7MQ.js";import"./chunk-WLHY3MMA.js";import"./chunk-KGVXGH6H.js";import"./chunk-ARRCN5K3.js";import"./chunk-LXQPIAN7.js";import"./chunk-FTDD7QBB.js";import"./chunk-DB3UIQCU.js";import"./chunk-SBHKMV3P.js";import"./chunk-R4A63S45.js";import"./chunk-ETE32IYO.js";import"./chunk-ONUGDWDK.js";import"./chunk-SG7CQU4O.js";import"./chunk-QHVIRF5H.js";import"./chunk-WZDN6K3C.js";import"./chunk-QGVBCWUY.js";import"./chunk-OJQ73TPF.js";import"./chunk-354SCPDU.js";import"./chunk-OVHPPCBL.js";import"./chunk-IYZFKXJ6.js";import"./chunk-CKJ56T2Q.js";import"./chunk-SNFOAZZQ.js";import"./chunk-F6JAWRPN.js";import"./chunk-UHRSAPGQ.js";import"./chunk-V76GWARL.js";import{a as i,b as c}from"./chunk-N2WTMF3X.js";var f="Group Layer",A="group-layer-save",R="group-layer-save-as",n=s.GROUP_LAYER_MAP;function d(e){return{isValid:e.type==="group",errorMessage:"Layer.type should be 'group'"}}function P(e){return{isValid:u(e,n),errorMessage:`Layer.portalItem.typeKeywords should have '${n}'`}}function I(e,r){return c(i({},l(e,"web-map",!0)),{initiator:r})}function g(e){let r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}async function T(e,r){r.title||=e.title,m(r,s.METADATA),y(r,n)}async function N(e,r){return p({layer:e,itemType:f,validateLayer:d,validateItem:P,createJSONContext:a=>I(a,e),createItemData:g,errorNamePrefix:A,saveResources:async(a,t)=>(e.sourceIsPortalItem||await a.removeAllResources().catch(()=>{}),o(e.resourceReferences,t))},r)}async function O(e,r,a){return v({layer:e,itemType:f,validateLayer:d,createJSONContext:t=>I(t,e),createItemData:g,errorNamePrefix:R,newItem:r,setItemProperties:T,saveResources:(t,w)=>o(e.resourceReferences,w)},a)}export{N as save,O as saveAs};
