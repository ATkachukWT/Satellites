import{a as R}from"./chunk-75L4O5ME.js";import{b as d}from"./chunk-3S7MXQDG.js";import{b as f,e as w}from"./chunk-KMLF2ICK.js";import{b as y}from"./chunk-TBA3OZMJ.js";import{n as m}from"./chunk-Z5Q7KLA4.js";import{H as o}from"./chunk-QHVIRF5H.js";import{I as h}from"./chunk-WZDN6K3C.js";import{a as t}from"./chunk-QGVBCWUY.js";import{v as c}from"./chunk-CKJ56T2Q.js";import{t as u}from"./chunk-UHRSAPGQ.js";var B=g=>{let e=class extends g{constructor(){super(...arguments),this.view=null}get timeExtent(){return R(this.layer,this.view?.timeExtent,this._get("timeExtent"))}async fetchPopupFeaturesAtLocation(a,n){let{layer:s}=this;if(!a)throw new u("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:s});let{popupEnabled:v}=s,p=d(s,n);if(!v||p==null)return[];let x=await p.getRequiredFields();c(n);let r=new y;r.timeExtent=this.timeExtent,r.geometry=a,r.outFields=x,r.outSpatialReference=a.spatialReference;let{resolution:i,spatialReference:l}=this.view,E=this.view.type==="2d"?new m(i,i,l):new m(.5*i,.5*i,l),{returnTopmostRaster:S,showNoDataRecords:b}=p.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},F={returnDomainValues:!0,returnTopmostRaster:S,pixelSize:E,showNoDataRecords:b,signal:n?.signal};return s.queryVisibleRasters(r,F).then(T=>T)}async getSourceScale(){return await f(),await this.layer.load(),w(this.layer.serviceRasterInfo,this.view.spatialReference)}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return t([o()],e.prototype,"layer",void 0),t([o()],e.prototype,"suspended",void 0),t([o({readOnly:!0})],e.prototype,"timeExtent",null),t([o()],e.prototype,"view",void 0),e=t([h("esri.views.layers.ImageryLayerView")],e),e};export{B as a};
