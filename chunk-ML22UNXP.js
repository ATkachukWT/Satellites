import{b as p}from"./chunk-EMWFZOBO.js";import{j as i}from"./chunk-U3SOQMWO.js";import"./chunk-R4A63S45.js";import"./chunk-ETE32IYO.js";import"./chunk-ONUGDWDK.js";import"./chunk-SG7CQU4O.js";import"./chunk-QHVIRF5H.js";import"./chunk-WZDN6K3C.js";import"./chunk-QGVBCWUY.js";import"./chunk-OJQ73TPF.js";import"./chunk-354SCPDU.js";import"./chunk-OVHPPCBL.js";import"./chunk-IYZFKXJ6.js";import"./chunk-CKJ56T2Q.js";import"./chunk-SNFOAZZQ.js";import"./chunk-F6JAWRPN.js";import"./chunk-UHRSAPGQ.js";import"./chunk-V76GWARL.js";import"./chunk-N2WTMF3X.js";var o,e;async function y(r){if(await f(),r.inputs.length<1)return{result:{status:i.Failed,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]},transferList:[]};let n={ptrs:[],sizes:[]};for(let s of r.inputs){let c=e._malloc(s.byteLength);new Uint8Array(e.HEAPU8.buffer,c,s.byteLength).set(new Uint8Array(s)),n.ptrs.push(c),n.sizes.push(s.byteLength)}let t=e.process(r.jobDescJson,n,r.isMissingResourceCase),u=t.status===i.Succeeded&&t.data,l=t.status===i.MissingInputs&&t.missingInputUrls.length>0;if(u){let s=t.data.slice();t.data=s}else l&&(t.jobDescJson=t.jobDescJson.slice(),t.originalInputs=r.inputs.slice());for(let s=0;s<n.ptrs.length;++s)e._free(n.ptrs[s]);let a=[];if(u)a.push(t.data.buffer);else if(l)for(let s of r.inputs)a.push(s);return{result:t,transferList:a}}function g(){e&&(e.uninitialize_lyr3d_worker_wasm(),e=null)}function f(){return e?Promise.resolve():(o||(o=p().then(r=>{e=r,e.initialize_lyr3d_worker_wasm(),o=null})),o)}export{g as destroyWasm,f as initialize,y as process};
